/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={7758:(t,e,n)=>{function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function i(){"use strict";i=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function g(t,e,n,s){var i=e&&e.prototype instanceof b?e:b,r=Object.create(i.prototype),a=new O(s||[]);return o(r,"_invoke",{value:S(t,n,a)}),r}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=g;var f="suspendedStart",d="suspendedYield",m="executing",y="completed",w={};function b(){}function v(){}function x(){}var D={};h(D,c,(function(){return this}));var k=Object.getPrototypeOf,A=k&&k(k(T([])));A&&A!==n&&r.call(A,c)&&(D=A);var F=x.prototype=b.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,a,c){var u=p(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,s){function r(){return new e((function(e,i){n(t,s,e,i)}))}return i=i?i.then(r,r):r()}})}function S(e,n,s){var i=f;return function(r,o){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===r)throw o;return{value:t,done:!0}}for(s.method=r,s.arg=o;;){var a=s.delegate;if(a){var c=_(a,s);if(c){if(c===w)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(i===f)throw i=y,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);i=m;var u=p(e,n,s);if("normal"===u.type){if(i=s.done?y:d,u.arg===w)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(i=y,s.method="throw",s.arg=u.arg)}}}function _(e,n){var s=n.method,i=e.iterator[s];if(i===t)return n.delegate=null,"throw"===s&&e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),w;var r=p(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,w;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function T(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(s(e)+" is not iterable")}return v.prototype=x,o(F,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:v,configurable:!0}),v.displayName=h(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,l,"GeneratorFunction")),t.prototype=Object.create(F),t},e.awrap=function(t){return{__await:t}},C(E.prototype),h(E.prototype,u,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,s,i,r){void 0===r&&(r=Promise);var o=new E(g(t,n,s,i),r);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(F),h(F,l,"Generator"),h(F,c,(function(){return this})),h(F,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var s in e)n.push(s);return n.reverse(),function t(){for(;n.length;){var s=n.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(s,i){return a.type="throw",a.arg=e,n.next=s,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var s=n.completion;if("throw"===s.type){var i=s.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:T(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),w}},e}function r(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(s,i){var o=t.apply(e,n);function a(t){r(o,s,i,a,c,"next",t)}function c(t){r(o,s,i,a,c,"throw",t)}a(void 0)}))}}var a=n(79).containerBootstrap,c=n(6548).Nlp,u=n(6428).LangEn,l=n(6724),h=!0,g=function(t){return t.replaceAll(", ",",")},p=function(t){};function f(t){return d.apply(this,arguments)}function d(){return(d=o(i().mark((function t(e){var n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.nlpManager||window.nlpManager,e=g(e),t.next=4,n.process("en",e,this.context);case 4:if(s=t.sent,p(s),h&&console.log(s),!s.slotFill){t.next=9;break}return t.abrupt("return",{complete:!1,intent:s.intent,followUpQuestion:s.answer});case 9:return t.abrupt("return",{complete:!0,intent:s.intent,entities:s.entities});case 10:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initialised=!1,this.context=t}m.prototype={initialise:function(){var t=this;return o(i().mark((function e(){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.initialised){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,a();case 4:return(n=e.sent).use(c),n.use(u),s=n.get("nlp"),e.next=10,s.import(l);case 10:return t.nlpManager=s,t.ask=f.bind(t),t.initialised=!0,e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})))()},reset:function(){return this.context={},this}},t.exports={FabilabNlp:m}},6724:t=>{var e,n,s,i=String.raw(e||(n=['{\n  "settings": {\n    "tag": "nlp",\n    "forceNER": true,\n    "languages": [\n      "en"\n    ],\n    "corpora": [\n      "./chatbot/src/corpus.json"\n    ],\n    "calculateSentiment": true,\n    "executeActionsBeforeAnswers": false\n  },\n  "nluManager": {\n    "settings": {\n      "tag": "nlu-manager"\n    },\n    "locales": [\n      "en"\n    ],\n    "languageNames": {},\n    "domainManagers": {\n      "en": {\n        "settings": {\n          "locale": "en",\n          "trainByDomain": false,\n          "tag": "domain-manager-en",\n          "nluByDomain": {\n            "default": {\n              "className": "NeuralNlu",\n              "settings": {}\n            }\n          },\n          "useStemDict": true\n        },\n        "stemDict": {\n          "are,who,you": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "lab,list,member,the": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "group,in,is,the,who": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "are,in,lab,peopl,the,who": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "peopl": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "lab,member": {\n            "intent": "people",\n            "domain": "default"\n          },\n          "do,research,what,you": {\n            "intent": "research",\n            "domain": "default"\n          },\n          "list,of,project,show": {\n            "intent": "research",\n            "domain": "default"\n          },\n          "project,show": {\n            "intent": "research",\n            "domain": "default"\n          },\n          "are,project,research,the,where": {\n            "intent": "research",\n            "domain": "default"\n          },\n          "do,teach,what,you": {\n            "intent": "teaching",\n            "domain": "default"\n          },\n          "list,of,show,talk": {\n            "intent": "teaching",\n            "domain": "default"\n          },\n          "present,show": {\n            "intent": "teaching",\n            "domain": "default"\n          },\n          "are,slide,talk,the,where": {\n            "intent": "teaching",\n            "domain": "default"\n          },\n          "can,how,i,reach,you": {\n            "intent": "contact",\n            "domain": "default"\n          },\n          "email,is,what,your": {\n            "intent": "contact",\n            "domain": "default"\n          },\n          "address,email,show": {\n            "intent": "contact",\n            "domain": "default"\n          },\n          "is,lab,the,where": {\n            "intent": "contact",\n            "domain": "default"\n          },\n          "are,where,you": {\n            "intent": "contact",\n            "domain": "default"\n          },\n          "can,how,i,join,you": {\n            "intent": "jointhelab",\n            "domain": "default"\n          },\n          "am,i,in,interest,join": {\n            "intent": "jointhelab",\n            "domain": "default"\n          },\n          "ani,are,open,posit,there": {\n            "intent": "jointhelab",\n            "domain": "default"\n          },\n          "opportun,show": {\n            "intent": "jointhelab",\n            "domain": "default"\n          },\n          "did,publish,what,you": {\n            "intent": "publications",\n            "domain": "default"\n          },\n          "list,of,paper,show": {\n            "intent": "publications",\n            "domain": "default"\n          },\n          "public,show": {\n            "intent": "publications",\n            "domain": "default"\n          },\n          "ani,articl,did,write,you": {\n            "intent": "publications",\n            "domain": "default"\n          }\n        },\n        "intentDict": {\n          "people": "default",\n          "research": "default",\n          "teaching": "default",\n          "contact": "default",\n          "jointhelab": "default",\n          "publications": "default"\n        },\n        "sentences": [\n          {\n            "domain": "default",\n            "utterance": "who are you?",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "list the lab members",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "who is in the group",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "who are the people in the lab?",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "people",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "lab members",\n            "intent": "people"\n          },\n          {\n            "domain": "default",\n            "utterance": "what do you research?",\n            "intent": "research"\n          },\n          {\n            "domain": "default",\n            "utterance": "show list of projects",\n            "intent": "research"\n          },\n          {\n            "domain": "default",\n            "utterance": "show projects",\n            "intent": "research"\n          },\n          {\n            "domain": "default",\n            "utterance": "where are the research projects?",\n            "intent": "research"\n          },\n          {\n            "domain": "default",\n            "utterance": "what do you teach?",\n            "intent": "teaching"\n          },\n          {\n            "domain": "default",\n            "utterance": "show list of talks",\n            "intent": "teaching"\n          },\n          {\n            "domain": "default",\n            "utterance": "show presentations",\n            "intent": "teaching"\n          },\n          {\n            "domain": "default",\n            "utterance": "where are the talk slides?",\n            "intent": "teaching"\n          },\n          {\n            "domain": "default",\n            "utterance": "how can I reach you?",\n            "intent": "contact"\n          },\n          {\n            "domain": "default",\n            "utterance": "what is your email?",\n            "intent": "contact"\n          },\n          {\n            "domain": "default",\n            "utterance": "show email address",\n            "intent": "contact"\n          },\n          {\n            "domain": "default",\n            "utterance": "where is the lab?",\n            "intent": "contact"\n          },\n          {\n            "domain": "default",\n            "utterance": "where are you?",\n            "intent": "contact"\n          },\n          {\n            "domain": "default",\n            "utterance": "how can I join you?",\n            "intent": "jointhelab"\n          },\n          {\n            "domain": "default",\n            "utterance": "I am interesting in joining",\n            "intent": "jointhelab"\n          },\n          {\n            "domain": "default",\n            "utterance": "are there any open positions?",\n            "intent": "jointhelab"\n          },\n          {\n            "domain": "default",\n            "utterance": "show opportunities",\n            "intent": "jointhelab"\n          },\n          {\n            "domain": "default",\n            "utterance": "what did you publish?",\n            "intent": "publications"\n          },\n          {\n            "domain": "default",\n            "utterance": "show list of papers",\n            "intent": "publications"\n          },\n          {\n            "domain": "default",\n            "utterance": "show publications",\n            "intent": "publications"\n          },\n          {\n            "domain": "default",\n            "utterance": "did you write any articles?",\n            "intent": "publications"\n          }\n        ],\n        "domains": {\n          "master_domain": {\n            "settings": {\n              "locale": "en",\n              "tag": "nlu-en",\n              "keepStopwords": true,\n              "nonefeatureValue": 1,\n              "nonedeltaMultiplier": 1.2,\n              "spellCheck": false,\n              "spellCheckDistance": 1,\n              "filterZeros": true,\n              "log": true\n            },\n            "features": {\n              "who": 1,\n              "are": 1,\n              "you": 1,\n              "list": 1,\n              "the": 1,\n              "lab": 1,\n              "member": 1,\n              "is": 1,\n              "in": 1,\n              "group": 1,\n              "peopl": 1,\n              "what": 1,\n              "do": 1,\n              "research": 1,\n              "show": 1,\n              "of": 1,\n              "project": 1,\n              "where": 1,\n              "teach": 1,\n              "talk": 1,\n              "present": 1,\n              "slide": 1,\n              "how": 1,\n              "can": 1,\n              "i": 1,\n              "reach": 1,\n              "your": 1,\n              "email": 1,\n              "address": 1,\n              "join": 1,\n              "am": 1,\n              "interest": 1,\n              "there": 1,\n              "ani": 1,\n              "open": 1,\n              "posit": 1,\n              "opportun": 1,\n              "did": 1,\n              "publish": 1,\n              "paper": 1,\n              "public": 1,\n              "write": 1,\n              "articl": 1\n            },\n            "intents": {\n              "people": 1,\n              "research": 1,\n              "teaching": 1,\n              "contact": 1,\n              "jointhelab": 1,\n              "publications": 1\n            },\n            "intentFeatures": {\n              "people": {\n                "who": 1,\n                "are": 1,\n                "you": 1,\n                "list": 1,\n                "the": 1,\n                "lab": 1,\n                "member": 1,\n                "is": 1,\n                "in": 1,\n                "group": 1,\n                "peopl": 1\n              },\n              "research": {\n                "what": 1,\n                "do": 1,\n                "you": 1,\n                "research": 1,\n                "show": 1,\n                "list": 1,\n                "of": 1,\n                "project": 1,\n                "where": 1,\n                "are": 1,\n                "the": 1\n              },\n              "teaching": {\n                "what": 1,\n                "do": 1,\n                "you": 1,\n                "teach": 1,\n                "show": 1,\n                "list": 1,\n                "of": 1,\n                "talk": 1,\n                "present": 1,\n                "where": 1,\n                "are": 1,\n                "the": 1,\n                "slide": 1\n              },\n              "contact": {\n                "how": 1,\n                "can": 1,\n                "i": 1,\n                "reach": 1,\n                "you": 1,\n                "what": 1,\n                "is": 1,\n                "your": 1,\n                "email": 1,\n                "show": 1,\n                "address": 1,\n                "where": 1,\n                "the": 1,\n                "lab": 1,\n                "are": 1\n              },\n              "jointhelab": {\n                "how": 1,\n                "can": 1,\n                "i": 1,\n                "join": 1,\n                "you": 1,\n                "am": 1,\n                "interest": 1,\n                "in": 1,\n                "are": 1,\n                "there": 1,\n                "ani": 1,\n                "open": 1,\n                "posit": 1,\n                "show": 1,\n                "opportun": 1\n              },\n              "publications": {\n                "what": 1,\n                "did": 1,\n                "you": 1,\n                "publish": 1,\n                "show": 1,\n                "list": 1,\n                "of": 1,\n                "paper": 1,\n                "public": 1,\n                "write": 1,\n                "ani": 1,\n                "articl": 1\n              }\n            },\n            "featuresToIntent": {\n              "who": [\n                "people"\n              ],\n              "are": [\n                "people",\n                "research",\n                "teaching",\n                "contact",\n                "jointhelab"\n              ],\n              "you": [\n                "people",\n                "research",\n                "teaching",\n                "contact",\n                "jointhelab",\n                "publications"\n              ],\n              "list": [\n                "people",\n                "research",\n                "teaching",\n                "publications"\n              ],\n              "the": [\n                "people",\n                "research",\n                "teaching",\n                "contact"\n              ],\n              "lab": [\n                "people",\n                "contact"\n              ],\n              "member": [\n                "people"\n              ],\n              "is": [\n                "people",\n                "contact"\n              ],\n              "in": [\n                "people",\n                "jointhelab"\n              ],\n              "group": [\n                "people"\n              ],\n              "peopl": [\n                "people"\n              ],\n              "what": [\n                "research",\n                "teaching",\n                "contact",\n                "publications"\n              ],\n              "do": [\n                "research",\n                "teaching"\n              ],\n              "research": [\n                "research"\n              ],\n              "show": [\n                "research",\n                "teaching",\n                "contact",\n                "jointhelab",\n                "publications"\n              ],\n              "of": [\n                "research",\n                "teaching",\n                "publications"\n              ],\n              "project": [\n                "research"\n              ],\n              "where": [\n                "research",\n                "teaching",\n                "contact"\n              ],\n              "teach": [\n                "teaching"\n              ],\n              "talk": [\n                "teaching"\n              ],\n              "present": [\n                "teaching"\n              ],\n              "slide": [\n                "teaching"\n              ],\n              "how": [\n                "contact",\n                "jointhelab"\n              ],\n              "can": [\n                "contact",\n                "jointhelab"\n              ],\n              "i": [\n                "contact",\n                "jointhelab"\n              ],\n              "reach": [\n                "contact"\n              ],\n              "your": [\n                "contact"\n              ],\n              "email": [\n                "contact"\n              ],\n              "address": [\n                "contact"\n              ],\n              "join": [\n                "jointhelab"\n              ],\n              "am": [\n                "jointhelab"\n              ],\n              "interest": [\n                "jointhelab"\n              ],\n              "there": [\n                "jointhelab"\n              ],\n              "ani": [\n                "jointhelab",\n                "publications"\n              ],\n              "open": [\n                "jointhelab"\n              ],\n              "posit": [\n                "jointhelab"\n              ],\n              "opportun": [\n                "jointhelab"\n              ],\n              "did": [\n                "publications"\n              ],\n              "publish": [\n                "publications"\n              ],\n              "paper": [\n                "publications"\n              ],\n              "public": [\n                "publications"\n              ],\n              "write": [\n                "publications"\n              ],\n              "articl": [\n                "publications"\n              ]\n            },\n            "neuralNetwork": {\n              "settings": {\n                "locale": "en",\n                "tag": "nlu-en",\n                "keepStopwords": true,\n                "nonefeatureValue": 1,\n                "nonedeltaMultiplier": 1.2,\n                "spellCheck": false,\n                "spellCheckDistance": 1,\n                "filterZeros": true,\n                "log": true\n              },\n              "features": [\n                "who",\n                "are",\n                "you",\n                "list",\n                "the",\n                "lab",\n                "member",\n                "is",\n                "in",\n                "group",\n                "peopl",\n                "what",\n                "do",\n                "research",\n                "show",\n                "of",\n                "project",\n                "where",\n                "teach",\n                "talk",\n                "present",\n                "slide",\n                "how",\n                "can",\n                "i",\n                "reach",\n                "your",\n                "email",\n                "address",\n                "join",\n                "am",\n                "interest",\n                "there",\n                "ani",\n                "open",\n                "posit",\n                "opportun",\n                "did",\n                "publish",\n                "paper",\n                "public",\n                "write",\n                "articl"\n              ],\n              "intents": [\n                "people",\n                "research",\n                "teaching",\n                "contact",\n                "jointhelab",\n                "publications"\n              ],\n              "perceptrons": [\n                [\n                  7.625762939453125,\n                  -1.2270113229751587,\n                  1.7018502950668335,\n                  2.0637500286102295,\n                  -2.314086437225342,\n                  -0.4475891590118408,\n                  9.053991317749023,\n                  0.8246279954910278,\n                  -2.561990976333618,\n                  4.844382286071777,\n                  7.885525703430176,\n                  -4.075972557067871,\n                  -1.975364089012146,\n                  -1.3770438432693481,\n                  -4.838260650634766,\n                  -1.860168218612671,\n                  -1.3515866994857788,\n                  -6.051496982574463,\n                  -1.366935133934021,\n                  -1.2385685443878174,\n                  -0.8879620432853699,\n                  -0.7280766367912292,\n                  -1.7646626234054565,\n                  -1.7646626234054565,\n                  -2.5899665355682373,\n                  -1.3177703619003296,\n                  -1.1251991987228394,\n                  -1.2932647466659546,\n                  -0.16559424996376038,\n                  -1.2690935134887695,\n                  -0.789220929145813,\n                  -0.789220929145813,\n                  -0.829077959060669,\n                  -2.2194910049438477,\n                  -0.829077959060669,\n                  -0.829077959060669,\n                  -0.8470406532287598,\n                  -2.36002516746521,\n                  -0.9677231311798096,\n                  -1.0057789087295532,\n                  -0.8188237547874451,\n                  -1.3888369798660278,\n                  -1.3888369798660278,\n                  5.694973075864753\n                ],\n                [\n                  -0.3295421302318573,\n                  -2.3230128288269043,\n                  0.6152763366699219,\n                  0.05563764274120331,\n                  -1.7272307872772217,\n                  -0.8060601949691772,\n                  -0.2991810142993927,\n                  -0.7660165429115295,\n                  -0.19219020009040833,\n                  -0.02518853358924389,\n                  -0.19411954283714294,\n                  1.7778990268707275,\n                  3.2733898162841797,\n                  8.448047637939453,\n                  1.8367856740951538,\n                  0.37115374207496643,\n                  12.143260955810547,\n                  -2.1774113178253174,\n                  -5.514554023742676,\n                  -2.6107983589172363,\n                  -1.7761340141296387,\n                  -0.39151474833488464,\n                  -0.31652235984802246,\n                  -0.31652235984802246,\n                  -0.3966636657714844,\n                  -0.21569284796714783,\n                  -0.29501578211784363,\n                  -1.0686062574386597,\n                  -0.741016685962677,\n                  -0.14469116926193237,\n                  -0.05280696228146553,\n                  -0.05280696228146553,\n                  -0.21931833028793335,\n                  -0.268395334482193,\n                  -0.21931833028793335,\n                  -0.21931833028793335,\n                  -1.7734590768814087,\n                  -1.1987963914871216,\n                  -1.1651438474655151,\n                  -2.504743814468384,\n                  -1.7512893676757812,\n                  -0.02296288125216961,\n                  -0.02296288125216961,\n                  -0.024627276357844893\n                ],\n                [\n                  -0.6053946614265442,\n                  -0.49107998609542847,\n                  -0.513493537902832,\n                  -0.025180552154779434,\n                  0.9203458428382874,\n                  -1.53343665599823,\n                  -0.5271715521812439,\n                  -1.2042583227157593,\n                  -0.39125531911849976,\n                  -0.0666794553399086,\n                  -0.7759785652160645,\n                  1.9619611501693726,\n                  3.4632434844970703,\n                  -5.575732707977295,\n                  2.625129461288452,\n                  0.503899097442627,\n                  -3.80336594581604,\n                  -0.3221152424812317,\n                  8.513081550598145,\n                  10.334354400634766,\n                  10.791596412658691,\n                  3.0793795585632324,\n                  -0.33384472131729126,\n                  -0.33384472131729126,\n                  -0.4689323604106903,\n                  -0.22420307993888855,\n                  -0.2848396897315979,\n                  -1.859562873840332,\n                  -1.5614469051361084,\n                  -0.21822383999824524,\n                  -0.1085849478840828,\n                  -0.1085849478840828,\n                  -0.4272143542766571,\n                  -0.4681283235549927,\n                  -0.4272143542766571,\n                  -0.4272143542766571,\n                  -3.3720438480377197,\n                  -1.2200065851211548,\n                  -1.192172646522522,\n                  -3.863856554031372,\n                  -3.3485124111175537,\n                  -0.018763545900583267,\n                  -0.018763545900583267,\n                  0.7729112715989985\n                ],\n                [\n                  -4.646092414855957,\n                  0.3223506808280945,\n                  4.16356086730957,\n                  -1.059950351715088,\n                  -3.1063296794891357,\n                  2.088779926300049,\n                  -2.4787709712982178,\n                  5.772811412811279,\n                  -1.5967479944229126,\n                  -0.9897990226745605,\n                  -0.7434786558151245,\n                  -1.3149861097335815,\n                  -1.918792724609375,\n                  -3.4808237552642822,\n                  0.8583160638809204,\n                  -0.5450187921524048,\n                  -3.2648813724517822,\n                  9.247036933898926,\n                  -1.2188950777053833,\n                  -3.3841636180877686,\n                  -1.1782121658325195,\n                  -3.353877305984497,\n                  0.896765410900116,\n                  0.896765410900116,\n                  0.5818794369697571,\n                  7.4051713943481445,\n                  1.9582089185714722,\n                  7.53331184387207,\n                  5.573872089385986,\n                  -6.824136734008789,\n                  -0.24977463483810425,\n                  -0.24977463483810425,\n                  -0.3487110733985901,\n                  -1.1221013069152832,\n                  -0.3487110733985901,\n                  -0.3487110733985901,\n                  -1.2896803617477417,\n                  -2.023160934448242,\n                  -1.3455901145935059,\n                  -0.3911016881465912,\n                  -1.2738230228424072,\n                  -0.6696723699569702,\n                  -0.6696723699569702,\n                  0.32694595205713856\n                ],\n                [\n                  -1.479205846786499,\n                  1.0435223579406738,\n                  -1.1124151945114136,\n                  -1.1750916242599487,\n                  -1.3606305122375488,\n                  -0.9536854028701782,\n                  -0.4554903507232666,\n                  -0.33077794313430786,\n                  0.18636128306388855,\n                  -0.2567482888698578,\n                  -1.2153913974761963,\n                  -0.6339669227600098,\n                  -0.23617666959762573,\n                  -0.30802351236343384,\n                  1.5708544254302979,\n                  -1.0421980619430542,\n                  -2.6617369651794434,\n                  -1.0299525260925293,\n                  -0.0725552961230278,\n                  -0.4734695851802826,\n                  -2.6415672302246094,\n                  -0.22474832832813263,\n                  1.6021637916564941,\n                  1.6021637916564941,\n                  2.6231677532196045,\n                  -5.714200496673584,\n                  -0.032824791967868805,\n                  -1.3605228662490845,\n                  -1.310760259628296,\n                  8.346753120422363,\n                  1.019982933998108,\n                  1.019982933998108,\n                  3.235346794128418,\n                  2.4192137718200684,\n                  3.235346794128418,\n                  3.235346794128418,\n                  11.493550300598145,\n                  -1.100290298461914,\n                  -0.26651883125305176,\n                  -0.5725210309028625,\n                  -2.6653947830200195,\n                  -0.7518724799156189,\n                  -0.7518724799156189,\n                  1.1185832830190172\n                ],\n                [\n                  -1.0889103412628174,\n                  -1.8353271484375,\n                  1.5371818542480469,\n                  0.4785425066947937,\n                  -0.6585038304328918,\n                  -0.7426064610481262,\n                  -0.6724543571472168,\n                  -0.4307490885257721,\n                  -0.204095259308815,\n                  -0.11315680295228958,\n                  -0.9005603790283203,\n                  1.3932467699050903,\n                  -2.598052740097046,\n                  -1.3598512411117554,\n                  2.533842086791992,\n                  0.9466335773468018,\n                  -4.784748077392578,\n                  -0.5387569069862366,\n                  -1.2373629808425903,\n                  -4.764852523803711,\n                  -3.3313615322113037,\n                  0,\n                  -0.6983757019042969,\n                  -0.6983757019042969,\n                  -0.7096042633056641,\n                  -0.3961816728115082,\n                  -0.26127541065216064,\n                  -1.821138620376587,\n                  -1.5489575862884521,\n                  -0.26786506175994873,\n                  -0.005614173132926226,\n                  -0.005614173132926226,\n                  -0.3042697310447693,\n                  1.6576008796691895,\n                  -0.3042697310447693,\n                  -0.3042697310447693,\n                  -3.292506456375122,\n                  6.259304523468018,\n                  4.264837265014648,\n                  9.450451850891113,\n                  10.807870864868164,\n                  1.994575023651123,\n                  1.994575023651123,\n                  0.8408195900872665\n                ]\n              ]\n            }\n          }\n        }\n      }\n    },\n    "intentDomains": {},\n    "extraSentences": [\n      [\n        "en",\n        "who are you?"\n      ],\n      [\n        "en",\n        "list the lab members"\n      ],\n      [\n        "en",\n        "who is in the group"\n      ],\n      [\n        "en",\n        "who are the people in the lab?"\n      ],\n      [\n        "en",\n        "people"\n      ],\n      [\n        "en",\n        "lab members"\n      ],\n      [\n        "en",\n        "what do you research?"\n      ],\n      [\n        "en",\n        "show list of projects"\n      ],\n      [\n        "en",\n        "show projects"\n      ],\n      [\n        "en",\n        "where are the research projects?"\n      ],\n      [\n        "en",\n        "what do you teach?"\n      ],\n      [\n        "en",\n        "show list of talks"\n      ],\n      [\n        "en",\n        "show presentations"\n      ],\n      [\n        "en",\n        "where are the talk slides?"\n      ],\n      [\n        "en",\n        "how can I reach you?"\n      ],\n      [\n        "en",\n        "what is your email?"\n      ],\n      [\n        "en",\n        "show email address"\n      ],\n      [\n        "en",\n        "where is the lab?"\n      ],\n      [\n        "en",\n        "where are you?"\n      ],\n      [\n        "en",\n        "how can I join you?"\n      ],\n      [\n        "en",\n        "I am interesting in joining"\n      ],\n      [\n        "en",\n        "are there any open positions?"\n      ],\n      [\n        "en",\n        "show opportunities"\n      ],\n      [\n        "en",\n        "what did you publish?"\n      ],\n      [\n        "en",\n        "show list of papers"\n      ],\n      [\n        "en",\n        "show publications"\n      ],\n      [\n        "en",\n        "did you write any articles?"\n      ]\n    ]\n  },\n  "ner": {\n    "settings": {\n      "tag": "ner"\n    },\n    "rules": {}\n  },\n  "nlgManager": {\n    "settings": {\n      "tag": "nlg-manager"\n    },\n    "responses": {}\n  },\n  "actionManager": {\n    "settings": {\n      "tag": "action-manager"\n    },\n    "actions": {}\n  },\n  "slotManager": {}\n}'],s||(s=n.slice(0)),e=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(s)}}))));t.exports=i},2545:t=>{t.exports=class{constructor(t,e,n,s,i){this.s_size=t.length,this.s=t,this.substring_i=e,this.result=n,this.method=s,this.instance=i}}},1401:(t,e,n)=>{const{defaultContainer:s}=n(8614);class i{constructor(t=s){this.container=t.container||t,this.name="arrToObj"}static arrToObj(t){const e={};for(let n=0;n<t.length;n+=1)e[t[n]]=1;return e}run(t){return Array.isArray(t)?i.arrToObj(t):(t.tokens=i.arrToObj(t.tokens),t)}}t.exports=i},5051:(t,e,n)=>{const{defaultContainer:s}=n(8614),i=n(4658);t.exports=class{constructor(t=s,e){this.container=t.container||t,this.cache={},this.setCurrent(""),this.dictionary=e||{before:{},after:{}}}setCurrent(t){this.current=t,this.cursor=0,this.limit=this.current.length,this.limit_backward=0,this.bra=this.cursor,this.ket=this.limit}getCurrent(){return this.current}bc(t,e){return 0==(t[e>>>3]&1<<(7&e))}in_grouping(t,e,n){if(this.cursor>=this.limit)return!1;let s=this.current.charCodeAt(this.cursor);return!(s>n||s<e||(s-=e,this.bc(t,s)||(this.cursor++,0)))}in_grouping_b(t,e,n){if(this.cursor<=this.limit_backward)return!1;let s=this.current.charCodeAt(this.cursor-1);return!(s>n||s<e||(s-=e,this.bc(t,s)||(this.cursor--,0)))}out_grouping(t,e,n){if(this.cursor>=this.limit)return!1;let s=this.current.charCodeAt(this.cursor);return s>n||s<e?(this.cursor++,!0):(s-=e,!!this.bc(t,s)&&(this.cursor++,!0))}out_grouping_b(t,e,n){if(this.cursor<=this.limit_backward)return!1;let s=this.current.charCodeAt(this.cursor-1);return s>n||s<e?(this.cursor--,!0):(s-=e,!!this.bc(t,s)&&(this.cursor--,!0))}eq_s(t,e){return"string"==typeof t&&(t=(e=t).length),!(this.limit-this.cursor<t||this.current.slice(this.cursor,this.cursor+t)!=e||(this.cursor+=t,0))}eq_s_b(t,e){return"string"==typeof t&&(t=(e=t).length),!(this.cursor-this.limit_backward<t||this.current.slice(this.cursor-t,this.cursor)!=e||(this.cursor-=t,0))}find_among(t,e){let n=0,s=e||t.length;const i=this.cursor,r=this.limit;let o=0,a=0,c=!1;for(;;){const e=n+(s-n>>>1);let h=0,g=o<a?o:a;var u,l=t[e];for(u=g;u<l.s_size;u++){if(i+g==r){h=-1;break}if(h=this.current.charCodeAt(i+g)-l.s.charCodeAt(u),0!=h)break;g++}if(h<0?(s=e,a=g):(n=e,o=g),s-n<=1){if(n>0)break;if(s==n)break;if(c)break;c=!0}}for(;;){if(o>=(l=t[n]).s_size){if(this.cursor=i+l.s_size,null==l.method)return l.result;const t=l.method(l.instance);if(this.cursor=i+l.s_size,t)return l.result}if(n=l.substring_i,n<0)return 0}return-1}find_among_b(t,e){let n=0,s=e||t.length;const i=this.cursor,r=this.limit_backward;let o=0,a=0,c=!1;for(;;){const e=n+(s-n>>1);let h=0,g=o<a?o:a;var u;for(u=(l=t[e]).s_size-1-g;u>=0;u--){if(i-g==r){h=-1;break}if(h=this.current.charCodeAt(i-1-g)-l.s.charCodeAt(u),0!=h)break;g++}if(h<0?(s=e,a=g):(n=e,o=g),s-n<=1){if(n>0)break;if(s==n)break;if(c)break;c=!0}}for(;;){var l;if(o>=(l=t[n]).s_size){if(this.cursor=i-l.s_size,null==l.method)return l.result;const t=l.method(this);if(this.cursor=i-l.s_size,t)return l.result}if(n=l.substring_i,n<0)return 0}return-1}replace_s(t,e,n){const s=n.length-(e-t);return this.current=this.current.slice(0,t)+n+this.current.slice(e),this.limit+=s,this.cursor>=e?this.cursor+=s:this.cursor>t&&(this.cursor=t),s}slice_check(){return!(this.bra<0||this.bra>this.ket||this.ket>this.limit||this.limit>this.current.length)}slice_from(t){return!!this.slice_check()&&(this.replace_s(this.bra,this.ket,t),!0)}slice_del(){return this.slice_from("")}insert(t,e,n){const s=this.replace_s(t,e,n);t<=this.bra&&(this.bra+=s),t<=this.ket&&(this.ket+=s)}slice_to(t){let e="";return this.slice_check()&&(e=this.current.slice(this.bra,this.ket)),e}stemWord(t){let e=this.cache[`.${t}`];return null==e&&(this.dictionary.before.hasOwnProperty(t)?e=this.dictionary.before[t]:(this.setCurrent(t),this.innerStem(),e=this.getCurrent(),this.dictionary.after.hasOwnProperty(e)&&(e=this.dictionary.after[e])),this.cache[`.${t}`]=e),e}stemWords(t){const e=[];for(let n=0;n<t.length;n++){const s=this.stemWord(t[n]);s&&e.push(s.trim())}return e}stem(t){return null==t?t:Array.isArray(t)?this.stemWords(t):this.stemWords([t])[0]}getTokenizer(){return this.tokenizer||(this.tokenizer=this.container.get(`tokenizer-${this.name.slice(-2)}`)||new i),this.tokenizer}getStopwords(){return this.stopwords||(this.stopwords=this.container.get(`tokenizer-${this.name.slice(-2)}`)),this.stopwords}tokenizeAndStem(t,e=!0){let n=this.getTokenizer().tokenize(t,!0);if(!e){const t=this.getStopwords();t&&(n=t.removeStopwords(n))}return this.stemWords(n)}}},4979:(t,e,n)=>{const{defaultContainer:s}=n(8614);t.exports=class{constructor(t={},e=s){this.container=t.container||e,this.applySettings(this,t)}get logger(){return this.container.get("logger")}applySettings(t,e={}){const n=t||{};return Object.keys(e).forEach((t=>{void 0===n[t]&&(n[t]=e[t])})),n}toJSON(){const t=this.jsonExport||{},e={},n=Object.keys(this);for(let s=0;s<n.length;s+=1){const i=n[s];if("jsonExport"!==i&&"jsonImport"!==i&&"container"!==i&&!i.startsWith("pipeline")){const n=void 0===t[i]||t[i];if("function"==typeof n){const t=n.bind(this)(e,this,i,this[i]);t&&(e[i]=t)}else"boolean"==typeof n?n&&(e[i]=this[i],"settings"===i&&delete e[i].container):"string"==typeof n&&(e[n]=this[i])}}return e}fromJSON(t){const e=this.jsonImport||{},n=Object.keys(t);for(let s=0;s<n.length;s+=1){const i=n[s],r=void 0===e[i]||e[i];if("function"==typeof r){const e=r.bind(this)(this,t,i,t[i]);e&&(this[i]=e)}else"boolean"==typeof r?r&&(this[i]=t[i]):"string"==typeof r&&(this[r]=t[i])}}objToValues(t,e){const n=e||Object.keys(t),s=[];for(let e=0;e<n.length;e+=1)s.push(t[n[e]]);return s}valuesToObj(t,e){const n={};for(let s=0;s<t.length;s+=1)n[e[s]]=t[s];return n}getPipeline(t){return this.container.getPipeline(t)}async runPipeline(t,e){return this.container.runPipeline(e||this.pipeline,t,this)}use(t){this.container.use(t)}}},2082:(t,e,n)=>{const s=n(1401),{Container:i}=n(8614),r=n(1867),o=n(8392),{loadEnvFromJson:a}=n(2754),c=n(4647),u=n(7484),l=n(4658),h=n(531),g=n(683),p=n(2187),f=n(5304);function d(t,e){if("string"==typeof t)return t.startsWith("$")?process.env[`${e}${t.slice(1)}`]||process.env[t.slice(1)]:t;if(Array.isArray(t))return t.map((t=>d(t,e)));if("object"==typeof t){const n=Object.keys(t),s={};for(let i=0;i<n.length;i+=1)s[n[i]]=d(t[n[i]],e);return s}return t}t.exports=function(t,e,n,m,y,w){const b=t||{},v=n||new i(m);v.parent=w,m||(v.register("fs",f),v.use(s),v.use(r),v.use(o),v.use(c),v.use(u),v.use(l),v.use(h),v.use(g),v.use(p));const x=b;let D;if(b.env&&a(m,b.env),D=x,D=d(D,m?`${m}_`:""),D.settings){const t=Object.keys(D.settings);for(let e=0;e<t.length;e+=1)v.registerConfiguration(t[e],D.settings[t[e]],!0)}if(D.use)for(let t=0;t<D.use.length;t+=1){const e=D.use[t];Array.isArray(e)?v.register(e[0],e[1]):v.use(e)}if(D.terraform)for(let t=0;t<D.terraform.length;t+=1){const e=D.terraform[t],n=v.get(e.className);v.register(e.name,n,!0)}if(D.childs&&(v.childs=D.childs),y)for(let t=0;t<y.length;t+=1){const e=y[t];v.registerPipeline(e.tag,e.pipeline,e.overwrite)}return D.pipelines&&function(t,e){t.loadPipelinesFromString(e)}(v,D.pipelines),v}},8614:(t,e,n)=>{const{compareWildcars:s}=n(2754),i=n(3657),r=n(683);class o{constructor(t=!1){this.classes={},this.factory={},this.pipelines={},this.configurations={},this.compilers={},this.cache={bestKeys:{},pipelines:{}},this.registerCompiler(i),t||this.use(r)}registerCompiler(t,e){const n=new t(this);this.compilers[e||n.name]=n}addClass(t,e){this.classes[e||t.name]=t}toJSON(t){const e=t.toJSON?t.toJSON():{...t};return e.className=t.constructor.name,e}fromJSON(t,e){const n=this.classes[t.className];let s;return n?(s=new n(e),s.fromJSON?s.fromJSON(t):Object.assign(s,t)):s={...t},delete s.className,s}register(t,e,n=!0){this.cache.bestKeys={};const s="function"==typeof e,i={name:t,isSingleton:n};i.instance=n?s?new e:e:s?e:e.constructor,this.factory[t]=i}getBestKey(t){if(void 0!==this.cache.bestKeys[t])return this.cache.bestKeys[t];const e=Object.keys(this.factory);for(let n=0;n<e.length;n+=1)if(s(t,e[n]))return this.cache.bestKeys[t]=e[n],e[n];this.cache.bestKeys[t]=null}get(t,e){let n=this.factory[t];if(!n){if(this.parent)return this.parent.get(t,e);const s=this.getBestKey(t);if(s&&(n=this.factory[s]),!n)return}return n.isSingleton?(n.instance&&n.instance.applySettings&&n.instance.applySettings(n.instance.settings,e),n.instance):new(0,n.instance)(e,this)}buildLiteral(t,e,n,s){return{type:"literal",subtype:t,src:e,value:n,context:s,container:this}}resolvePathWithType(t,e,n,s){const i=t.split(".");let r=i[0].trim();if(r||(r=t.startsWith(".")?"this":"context"),/^\d+$/.test(r))return this.buildLiteral("number",t,parseFloat(r),e);if(r.startsWith('"'))return this.buildLiteral("string",t,r.replace(/^"(.+(?="$))"$/,"$1"),e);if(r.startsWith("'"))return this.buildLiteral("string",t,r.replace(/^'(.+(?='$))'$/,"$1"),e);if("true"===r)return this.buildLiteral("boolean",t,!0,e);if("false"===r)return this.buildLiteral("boolean",t,!1,e);let o=e;"input"===r||"output"===r?o=n:r&&"context"!==r&&"this"!==r?o=this.get(r)||o[r]:"this"===r&&(o=s);for(let e=1;e<i.length;e+=1){const n=i[e];if((!o||!o[n])&&e<i.length-1)throw Error(`Path not found in pipeline "${t}"`);const s=o;o=o[n],"function"==typeof o&&(o=o.bind(s))}return"function"==typeof o?{type:"function",src:t,value:o,context:e,container:this}:{type:"reference",src:t,value:o,context:e,container:this}}resolvePath(t,e,n,s){const i=this.resolvePathWithType(t,e,n,s);return i?i.value:i}setValue(t,e,n,s,i){const r=this.resolvePath(e,n,s,i),o=t.split("."),a=o.slice(0,-1).join(".");this.resolvePath(a,n,s,i)[o[o.length-1]]=r}incValue(t,e,n,s,i){const r=this.resolvePath(e,n,s,i),o=t.split(".");t.startsWith(".")&&o.push("this");const a=o.slice(0,-1).join(".");this.resolvePath(a,n,s,i)[o[o.length-1]]+=r}decValue(t,e,n,s,i){const r=this.resolvePath(e,n,s,i),o=t.split("."),a=o.slice(0,-1).join(".");this.resolvePath(a,n,s,i)[o[o.length-1]]-=r}eqValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o===a}neqValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o!==a}gtValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o>a}geValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o>=a}ltValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o<a}leValue(t,e,n,s,i){const r=n,o=this.resolvePath(t,r,s,i),a=this.resolvePath(e,r,s,i);r.floating=o<=a}deleteValue(t,e,n,s){const i=t.split("."),r=i.slice(0,-1).join(".");delete this.resolvePath(r,e,n,s)[i[i.length-1]]}getValue(t,e,n,s){const i=(t||"floating").split("."),r=i.slice(0,-1).join(".");return this.resolvePath(r,e,n,s)[i[i.length-1]]}async runPipeline(t,e,n,s=0){if(s>10)throw new Error("Pipeline depth is too high: perhaps you are using recursive pipelines?");const i="string"==typeof t?this.getPipeline(t):t;if(!i)throw new Error(`Pipeline not found ${t}`);if(!i.compiler){const t=JSON.stringify(i);this.registerPipeline(t,i,!1);const r=this.getPipeline(t);return r.compiler.execute(r.compiled,e,n,s)}return i.compiler.execute(i.compiled,e,n,s)}use(t,e,n,s=!1){let i;if("function"==typeof t){if(t.name.endsWith("Compiler"))return this.registerCompiler(t),t.name;i=new t({container:this})}else i=t;i.register&&i.register(this);const r=i.settings?i.settings.tag:void 0,o=e||i.name||r||t.name||i.constructor.name;return s&&this.get(o)||this.register(o,i,n),o}getCompiler(t){return this.compilers[t]||(this.parent?this.parent.getCompiler(t):this.compilers.default)}buildPipeline(t,e=[]){const n=[];if(t&&t.length>0)for(let s=0;s<t.length;s+=1){const i=t[s];if("$super"===i.trim())for(let t=0;t<e.length;t+=1)e[t].trim().startsWith("->")||n.push(e[t]);else n.push(i)}const s=n.length&&n[0].startsWith("// compiler=")?n[0].slice(12):"default",i=this.getCompiler(s),r=i.compile(n);return{pipeline:n,compiler:i,compiled:r}}registerPipeline(t,e,n=!0){if(n||!this.pipelines[t]){this.cache.pipelines={};const n=this.getPipeline(t);this.pipelines[t]=this.buildPipeline(e,n?n.pipeline:[])}}registerPipelineForChilds(t,e,n,s=!0){this.childPipelines||(this.childPipelines={}),this.childPipelines[t]||(this.childPipelines[t]=[]),this.childPipelines[t].push({tag:e,pipeline:n,overwrite:s})}getPipeline(t){if(this.pipelines[t])return this.pipelines[t];if(void 0!==this.cache.pipelines[t])return this.cache.pipelines[t]||void 0;const e=Object.keys(this.pipelines);for(let n=0;n<e.length;n+=1)if(s(t,e[n]))return this.cache.pipelines[t]=this.pipelines[e[n]],this.pipelines[e[n]];this.cache.pipelines[t]=null}registerConfiguration(t,e,n=!0){!n&&this.configurations[t]||(this.configurations[t]=e)}getConfiguration(t){if(this.configurations[t])return this.configurations[t];const e=Object.keys(this.configurations);for(let n=0;n<e.length;n+=1)if(s(t,e[n]))return this.configurations[e[n]]}loadPipelinesFromString(t=""){const e=t.split(/\n|\r|\r\n/);let n="",s=[],i="";for(let t=0;t<e.length;t+=1){const r=e[t];""!==r&&(r.startsWith("# ")?(n&&(i&&!["default","pipelines"].includes(i.toLowerCase())?this.registerPipelineForChilds(i,n,s):this.registerPipeline(n,s)),i=r.slice(1).trim(),n="",s=[]):r.startsWith("## ")?(n&&(i&&!["default","pipelines"].includes(i.toLowerCase())?this.registerPipelineForChilds(i,n,s):this.registerPipeline(n,s)),n=r.slice(2).trim(),s=[]):n&&s.push(r))}n&&(i&&!["default","pipelines"].includes(i.toLowerCase())?this.registerPipelineForChilds(i,n,s):this.registerPipeline(n,s))}async start(t="main"){const e=Object.keys(this.factory);for(let t=0;t<e.length;t+=1){const n=this.factory[e[t]];n.isSingleton&&n.instance&&n.instance.start&&await n.instance.start()}this.getPipeline(t)&&await this.runPipeline(t,{},this)}}const a=new o;t.exports={Container:o,defaultContainer:a}},792:(t,e,n)=>{const{defaultContainer:s}=n(8614),i=n(4979);t.exports=class extends i{constructor(t={},e=void 0){super({settings:{},container:t.container||e||s},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="context"),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag))}getStorage(){const t=this.container.get(this.settings.storageName||"storage");if(!t)throw new Error("Storage not found");return t}getContext(t){return this.getStorage().read(`${this.settings.tag}-${t}`)}setContext(t,e){const n={[t]:e};return this.getStorage().write(n)}async getContextValue(t,e){const n=await this.getContext(t);return n?n[e]:void 0}async setContextValue(t,e,n){let s=await this.getContext(t);return s||(s={}),s[e]=n,this.setContext(t,s)}}},3657:t=>{t.exports=class{constructor(t){this.container=t.container||t,this.name="default"}getTokenFromWord(t){return t.startsWith("//")?{type:"comment",value:t}:["set","delete","get","inc","dec","eq","neq","gt","ge","lt","le","label","goto","jne","je"].includes(t)?{type:t,arguments:[]}:t.startsWith("$")?{type:"call",value:t.slice(1)}:{type:"reference",value:t}}compile(t){const e=[];for(let n=0;n<t.length;n+=1){const s=t[n].trim().split(" "),i=[];let r,o="";for(let t=0;t<s.length;t+=1){const e=s[t];let n=!1;r?(o=`${o} ${e}`,n=!0,e.endsWith(r)&&(r=void 0,i.push(this.getTokenFromWord(o)))):e.startsWith('"')?(o=e,n=!0,r='"',e.endsWith('"')&&(r=void 0,i.push(this.getTokenFromWord(o)))):e.startsWith("'")&&(o=e,n=!0,r="'",e.endsWith("'")&&(r=void 0,i.push(this.getTokenFromWord(o)))),n||i.push(this.getTokenFromWord(e))}e.push(i)}return e}executeCall(t,e,n,s,i){const r=this.container.getPipeline(t.value);if(!r)throw new Error(`Pipeline $${t.value} not found.`);return this.container.runPipeline(r,n,s,i+1)}executeReference(t,e,n,s,i){const r=this.container.resolvePath(e.value,n,s,i),o=[];for(let e=1;e<t.length;e+=1)o.push(this.container.resolvePathWithType(t[e].value,n,s,i));if(!r)throw new Error(`Method not found for step ${JSON.stringify(t)}`);const a=r.run||r;return"function"==typeof a?"function"==typeof r?a(s,...o):a.bind(r)(s,...o):a}doGoto(t,e){const n=e,s=n.labels[t];n.cursor=s}async executeAction(t,e,n,s,i){let r=t[0];if(r&&r.value&&r.value.startsWith("->")){if(i>0)return n;r={...r},r.value=r.value.slice(2)}switch(r.type){case"set":this.container.setValue(t[1].value,t[2]?t[2].value:void 0,e,n,s);break;case"delete":this.container.deleteValue(t[1].value,e,n,s);break;case"get":return this.container.getValue(t[1]?t[1].value:void 0,e,n,s);case"inc":this.container.incValue(t[1]?t[1].value:void 0,t[2]?t[2].value:"1",e,n,s);break;case"dec":this.container.decValue(t[1]?t[1].value:void 0,t[2]?t[2].value:"1",e,n,s);break;case"eq":this.container.eqValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"neq":this.container.neqValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"gt":this.container.gtValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"ge":this.container.geValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"lt":this.container.ltValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"le":this.container.leValue(t[1]?t[1].value:void 0,t[2]?t[2].value:void 0,e,n,s);break;case"goto":this.doGoto(t[1].value,e);break;case"jne":e.floating||this.doGoto(t[1].value,e);break;case"je":e.floating&&this.doGoto(t[1].value,e);break;case"call":return this.executeCall(r,e,n,s,i);case"reference":return this.executeReference(t,r,e,n,s)}return n}findLabels(t,e){const n=e;for(let e=0;e<t.length;e+=1){const s=t[e];"label"===s[0].type&&(n[s[1].value]=e)}}async execute(t,e,n,s){let i=e;const r={cursor:0,labels:{}};for(this.findLabels(t,r.labels);r.cursor<t.length;)i=await this.executeAction(t[r.cursor],r,i,n,s),r.cursor+=1;return i}}},8015:(t,e,n)=>{const s=n(2082),i=new class{constructor(){this.containers={}}getContainer(t){return this.containers[t||"default"]}async createContainer(t,e,n,i,r,o){const a=void 0===n||n;if("string"!=typeof t&&(e=t,t=""),e||"default"!==t&&""!==t||(e="conf.json"),!this.containers[t]){const n=s(e,a,void 0,i,o);n.name=t,this.containers[t]=n,n.dock=this,n.parent=r,await n.start(),n.childs&&await this.buildChilds(n)}return this.containers[t]}async buildChilds(t){if(t&&t.childs){const e=Object.keys(t.childs),n={};for(let s=0;s<e.length;s+=1){const i=t.childs[e[s]];i.isChild=!0,i.pathPipeline||(i.pathPipeline=`${e[s]}_pipeline.md`),n[e[s]]=await this.createContainer(e[s],i,!1,e[s],t,t.childPipelines?t.childPipelines[e[s]]:void 0)}t.childs=n}}async terraform(t,e=!0){return await this.createContainer("default",t,e,"")}start(t,e=!0){return this.terraform(t,e)}};t.exports=i},2754:t=>{const e="\\ud800-\\udfff",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff",s="\\ufe0e\\ufe0f",i=`[${e}]`,r=`[${n}]`,o="\\ud83c[\\udffb-\\udfff]",a=`[^${e}]`,c="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",l="\\u200d",h=`(?:${r}|${o})?`,g=`[${s}]?`,p=g+h+`(?:${l}(?:${[a,c,u].join("|")})${g+h})*`,f=`(?:${[`${a}${r}?`,r,c,u,i].join("|")})`,d=RegExp(`[${l+e+n+s}]`),m=RegExp(`${o}(?=${o})|${f+p}`,"g"),y=t=>d.test(t),w=t=>t.match(m)||[],b=t=>t.split("");t.exports={hasUnicode:y,unicodeToArray:w,asciiToArray:b,stringToArray:t=>y(t)?w(t):b(t),compareWildcars:function(t,e){const n=`^${e.split("*").map((t=>t.replace(/([.*+^=!:${}()|[\]/\\])/g,"\\$1"))).join(".*")}$`.replace(/\?/g,".");return new RegExp(n).test(t)},loadEnvFromJson:function(t,e={}){const n=Object.keys(e);t=t?`${t}_`:"";for(let s=0;s<n.length;s+=1){const i=`${t}${n[s]}`;process.env[i]=e[n[s]]}}}},79:(t,e,n)=>{const s=n(2545),i=n(1401),r=n(5051),o=n(2082),a=n(4979),{Container:c,defaultContainer:u}=n(8614),l=n(1867),h=n(8392),g=n(4647),p=n(7484),f=n(4658),d=n(531),m=n(683),{hasUnicode:y,unicodeToArray:w,asciiToArray:b,stringToArray:v,compareWildcars:x,loadEnv:D}=n(2754),k=n(2187),A=n(8873),F=n(8015),C=n(792);t.exports={Among:s,ArrToObj:i,BaseStemmer:r,containerBootstrap:o,Clonable:a,Container:c,defaultContainer:u,hasUnicode:y,unicodeToArray:w,asciiToArray:b,stringToArray:v,compareWildcars:x,loadEnv:D,Normalizer:l,ObjToArr:h,Stemmer:g,Stopwords:p,Tokenizer:f,Timer:d,logger:m,MemoryStorage:k,uuid:A,dock:F,Context:C,dockStart:async function(t,e){return await F.start(t,e),F}}},683:t=>{const e=new class{constructor(){this.name="logger"}debug(...t){console.debug(...t)}info(...t){console.info(...t)}warn(...t){console.warn(...t)}error(...t){console.error(...t)}log(...t){console.log(...t)}trace(...t){console.trace(...t)}fatal(...t){console.error(...t)}};t.exports=e},2187:(t,e,n)=>{const{defaultContainer:s}=n(8614),i=n(4979);t.exports=class extends i{constructor(t={},e=void 0){super({settings:{},container:t.container||e||s},e),this.applySettings(this.settings,t),this.applySettings(this.settings,{etag:1,memory:{}}),this.settings.tag||(this.settings.tag="storage"),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag))}read(t){return new Promise((e=>{const n={};Array.isArray(t)||(t=[t]),t.forEach((t=>{const e=this.settings.memory[t];e&&(n[t]=JSON.parse(e))})),e(n)}))}saveItem(t,e){const n={...e};return n.eTag=this.settings.etag.toString(),this.settings.etag+=1,this.settings.memory[t]=JSON.stringify(n),n}write(t){return new Promise(((e,n)=>{Object.keys(t).forEach((s=>{const i=t[s],r=this.settings.memory[s];if(!r||"*"===i.eTag)return e(this.saveItem(s,i));const o=JSON.parse(r);return i.eTag!==o.eTag?n(new Error(`Error writing "${s}" due to eTag conflict.`)):e(this.saveItem(s,i))}))}))}delete(t){return new Promise((e=>{t.forEach((t=>delete this.settings.memory[t])),e()}))}}},5304:t=>{t.exports={readFile:function(){return new Promise((t=>{t(void 0)}))},writeFile:function(){return new Promise(((t,e)=>{e(new Error("File cannot be written in web"))}))},existsSync:function(){return!1},lstatSync:function(){},readFileSync:function(){},name:"fs"}},1867:(t,e,n)=>{const{defaultContainer:s}=n(8614);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="normalize"}normalize(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}run(t){const e=t,n=e.locale||"en",s=this.container.get(`normalizer-${n}`)||this;return e.text=s.normalize(e.text,e),e}}},8392:(t,e,n)=>{const{defaultContainer:s}=n(8614);class i{constructor(t=s){this.container=t.container||t,this.name="objToArr"}static objToArr(t){return Object.keys(t)}run(t){return t.tokens?(t.tokens=i.objToArr(t.tokens),t):i.objToArr(t)}}t.exports=i},4647:(t,e,n)=>{const{defaultContainer:s}=n(8614);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="stem"}stem(t){return t}getStemmer(t){const e=t,n=e.locale||e.settings&&e.settings.locale||"en";let s=this.container.get(`stemmer-${n}`);if(!s){const t=this.container.get("stemmer-bert");s=t&&t.activeFor(n)?t:this}return s}async addForTraining(t){const e=this.getStemmer(t);return e.addUtterance&&await e.addUtterance(t.utterance,t.intent),t}async train(t){const e=this.getStemmer(t);return e.innerTrain&&await e.innerTrain(),t}async run(t){const e=t,n=this.getStemmer(e);return e.tokens=await n.stem(e.tokens,e),e}}},7484:(t,e,n)=>{const{defaultContainer:s}=n(8614);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="removeStopwords",this.dictionary={}}build(t){for(let e=0;e<t.length;e+=1)this.dictionary[t[e]]=!0}isNotStopword(t){return!this.dictionary[t]}isStopword(t){return!!this.dictionary[t]}removeStopwords(t){return t.filter((t=>this.isNotStopword(t)))}run(t){if(t.settings&&!1===t.settings.keepStopwords){const e=t,n=e.locale||"en",s=this.container.get(`stopwords-${n}`)||this;return e.tokens=s.removeStopwords(e.tokens,e).filter((t=>t)),e}return t}}},531:(t,e,n)=>{const{defaultContainer:s}=n(8614);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="timer"}start(t){return t&&(t.hrstart=new Date),t}stop(t){const e=t;if(e&&e.hrstart){const t=new Date;e.elapsed=t.getTime()-e.hrstart.getTime(),delete e.hrstart}return e}run(t){this.start(t)}}},4658:(t,e,n)=>{const{defaultContainer:s}=n(8614),i=n(1867);t.exports=class{constructor(t=s,e=!1){this.container=t.container||t,this.name="tokenize",this.shouldNormalize=e}getNormalizer(){return this.normalizer||(this.normalizer=this.container.get(`normalizer-${this.name.slice(-2)}`)||new i),this.normalizer}normalize(t,e){return void 0===e&&this.shouldNormalize||!0===e?this.getNormalizer().normalize(t):t}innerTokenize(t){return t.split(/[\s,.!?;:([\]'")/]+/).filter((t=>t))}tokenize(t,e){let n;if(this.cache){const t=new Date;Math.abs(t.getTime()-this.cache.created)/36e5>1&&(this.cache=void 0)}if(this.cache){if(e?Object.prototype.hasOwnProperty.call(this.cache.normalized,t)&&(n=this.cache.normalized[t]):Object.prototype.hasOwnProperty.call(this.cache.nonNormalized,t)&&(n=this.cache.nonNormalized[t]),n)return n}else this.cache={created:(new Date).getTime(),normalized:{},nonNormalized:{}};return n=this.innerTokenize(this.normalize(t,e),e),e?this.cache.normalized[t]=n:this.cache.nonNormalized[t]=n,n}async run(t){const e=t,n=e.locale||"en";let s=this.container.get(`tokenizer-${n}`);if(!s){const t=this.container.get("tokenizer-bert");s=t&&t.activeFor(n)?t:this}const i=await s.tokenize(e.text,e);return e.tokens=i.filter((t=>t)),e}}},8873:t=>{t.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}},6428:(t,e,n)=>{const s=n(7722),i=n(6257),r=n(403),o=n(2316),a=n(4397),c=n(1855),u=n(4326);t.exports={LangEn:s,StemmerEn:r,StopwordsEn:o,TokenizerEn:i,NormalizerEn:a,SentimentEn:c,registerTrigrams:u}},7722:(t,e,n)=>{const s=n(6257),i=n(403),r=n(2316),o=n(4397),a=n(1855),c=n(4326);t.exports=class{register(t){t.use(s),t.use(i),t.use(r),t.use(o),t.register("sentiment-en",a),c(t)}}},4397:(t,e,n)=>{const{Normalizer:s}=n(79);t.exports=class extends s{constructor(t){super(t),this.name="normalizer-en"}normalize(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}run(t){const e=t;return e.text=this.normalize(e.text,e),e}}},1855:t=>{t.exports={senticon:void 0,afinn:void 0,pattern:void 0,negations:{words:[]}}},403:(t,e,n)=>{const{Among:s,BaseStemmer:i}=n(79),r=n(6257);class o extends i{constructor(t){super(t),this.name="stemmer-en",this.B_Y_found=!1,this.I_p2=0,this.I_p1=0}getTokenizer(){return this.tokenizer||(this.tokenizer=this.container.get(`tokenizer-${this.name.slice(-2)}`)||new r,"Tokenizer"===this.tokenizer.constructor.name&&(this.tokenizer=new r)),this.tokenizer}r_prelude(){let t,e,n,s,i;this.B_Y_found=!1,t=this.cursor;let r=!0;for(;1==r&&(r=!1,this.bra=this.cursor,this.eq_s("'"));)if(this.ket=this.cursor,!this.slice_del())return!1;this.cursor=t,e=this.cursor;let a=!0;for(;1==a&&(a=!1,this.bra=this.cursor,this.eq_s("y"));){if(this.ket=this.cursor,!this.slice_from("Y"))return!1;this.B_Y_found=!0}this.cursor=e,n=this.cursor;let c=!0;for(;1==c;){c=!1;t:for(;;){s=this.cursor;let t=!0;e:for(;1==t;){t=!1;n:for(;;){i=this.cursor;let t=!0;for(;1==t&&(t=!1,this.in_grouping(o.g_v,97,121))&&(this.bra=this.cursor,this.eq_s("y"));){this.ket=this.cursor,this.cursor=i;break n}if(this.cursor=i,this.cursor>=this.limit)break e;this.cursor++}if(!this.slice_from("Y"))return!1;this.B_Y_found=!0;continue t}this.cursor=s;break}}return this.cursor=n,!0}r_mark_regions(){let t,e;this.I_p1=this.limit,this.I_p2=this.limit,t=this.cursor;let n=!0;t:for(;1==n;){n=!1;let t=!0;e:for(;1==t;){t=!1,e=this.cursor;let n=!0;for(;1==n&&(n=!1,0!=this.find_among(o.a_0,3));)break e;this.cursor=e;n:for(;;){let t=!0;for(;1==t&&(t=!1,this.in_grouping(o.g_v,97,121));)break n;if(this.cursor>=this.limit)break t;this.cursor++}n:for(;;){let t=!0;for(;1==t&&(t=!1,this.out_grouping(o.g_v,97,121));)break n;if(this.cursor>=this.limit)break t;this.cursor++}}this.I_p1=this.cursor;e:for(;;){let t=!0;for(;1==t&&(t=!1,this.in_grouping(o.g_v,97,121));)break e;if(this.cursor>=this.limit)break t;this.cursor++}e:for(;;){let t=!0;for(;1==t&&(t=!1,this.out_grouping(o.g_v,97,121));)break e;if(this.cursor>=this.limit)break t;this.cursor++}this.I_p2=this.cursor}return this.cursor=t,!0}r_shortv(){let t,e=!0;t:for(;1==e;){e=!1,t=this.limit-this.cursor;let n=!0;for(;1==n&&(n=!1,this.out_grouping_b(o.g_v_WXY,89,121))&&this.in_grouping_b(o.g_v,97,121)&&this.out_grouping_b(o.g_v,97,121);)break t;if(this.cursor=this.limit-t,!this.out_grouping_b(o.g_v,97,121))return!1;if(!this.in_grouping_b(o.g_v,97,121))return!1;if(this.cursor>this.limit_backward)return!1}return!0}r_R1(){return this.I_p1<=this.cursor}r_R2(){return this.I_p2<=this.cursor}r_Step_1a(){let t,e,n;e=this.limit-this.cursor;let s=!0;t:for(;1==s;){if(s=!1,this.ket=this.cursor,t=this.find_among_b(o.a_1,3),0==t){this.cursor=this.limit-e;break}switch(this.bra=this.cursor,t){case 0:this.cursor=this.limit-e;break t;case 1:if(!this.slice_del())return!1}}if(this.ket=this.cursor,t=this.find_among_b(o.a_2,6),0==t)return!1;switch(this.bra=this.cursor,t){case 0:return!1;case 1:if(!this.slice_from("ss"))return!1;break;case 2:var i=!0;t:for(;1==i;){i=!1,n=this.limit-this.cursor;let t=!0;for(;1==t;){t=!1;{const t=this.cursor-2;if(this.limit_backward>t||t>this.limit)break;this.cursor=t}if(!this.slice_from("i"))return!1;break t}if(this.cursor=this.limit-n,!this.slice_from("ie"))return!1}break;case 3:if(this.cursor<=this.limit_backward)return!1;this.cursor--;t:for(;;){let t=!0;for(;1==t&&(t=!1,this.in_grouping_b(o.g_v,97,121));)break t;if(this.cursor<=this.limit_backward)return!1;this.cursor--}if(!this.slice_del())return!1}return!0}r_Step_1b(){let t,e,n,s;if(this.ket=this.cursor,t=this.find_among_b(o.a_4,6),0==t)return!1;switch(this.bra=this.cursor,t){case 0:return!1;case 1:if(!this.r_R1())return!1;if(!this.slice_from("ee"))return!1;break;case 2:e=this.limit-this.cursor;t:for(;;){let t=!0;for(;1==t&&(t=!1,this.in_grouping_b(o.g_v,97,121));)break t;if(this.cursor<=this.limit_backward)return!1;this.cursor--}if(this.cursor=this.limit-e,!this.slice_del())return!1;if(n=this.limit-this.cursor,t=this.find_among_b(o.a_3,13),0==t)return!1;switch(this.cursor=this.limit-n,t){case 0:return!1;case 1:var i=this.cursor;this.insert(this.cursor,this.cursor,"e"),this.cursor=i;break;case 2:if(this.ket=this.cursor,this.cursor<=this.limit_backward)return!1;if(this.cursor--,this.bra=this.cursor,!this.slice_del())return!1;break;case 3:if(this.cursor!=this.I_p1)return!1;if(s=this.limit-this.cursor,!this.r_shortv())return!1;this.cursor=this.limit-s,i=this.cursor,this.insert(this.cursor,this.cursor,"e"),this.cursor=i}}return!0}r_Step_1c(){let t,e;this.ket=this.cursor;let n=!0;t:for(;1==n;){n=!1,t=this.limit-this.cursor;let e=!0;for(;1==e&&(e=!1,this.eq_s_b("y"));)break t;if(this.cursor=this.limit-t,!this.eq_s_b("Y"))return!1}if(this.bra=this.cursor,!this.out_grouping_b(o.g_v,97,121))return!1;{e=this.limit-this.cursor;let t=!0;for(;1==t&&(t=!1,!(this.cursor>this.limit_backward));)return!1;this.cursor=this.limit-e}return!!this.slice_from("i")}r_Step_2(){let t;if(this.ket=this.cursor,t=this.find_among_b(o.a_5,24),0==t)return!1;if(this.bra=this.cursor,!this.r_R1())return!1;switch(t){case 0:return!1;case 1:if(!this.slice_from("tion"))return!1;break;case 2:if(!this.slice_from("ence"))return!1;break;case 3:if(!this.slice_from("ance"))return!1;break;case 4:if(!this.slice_from("able"))return!1;break;case 5:if(!this.slice_from("ent"))return!1;break;case 6:if(!this.slice_from("ize"))return!1;break;case 7:if(!this.slice_from("ate"))return!1;break;case 8:if(!this.slice_from("al"))return!1;break;case 9:case 14:if(!this.slice_from("ful"))return!1;break;case 10:if(!this.slice_from("ous"))return!1;break;case 11:if(!this.slice_from("ive"))return!1;break;case 12:if(!this.slice_from("ble"))return!1;break;case 13:if(!this.eq_s_b("l"))return!1;if(!this.slice_from("og"))return!1;break;case 15:if(!this.slice_from("less"))return!1;break;case 16:if(!this.in_grouping_b(o.g_valid_LI,99,116))return!1;if(!this.slice_del())return!1}return!0}r_Step_3(){let t;if(this.ket=this.cursor,t=this.find_among_b(o.a_6,9),0==t)return!1;if(this.bra=this.cursor,!this.r_R1())return!1;switch(t){case 0:return!1;case 1:if(!this.slice_from("tion"))return!1;break;case 2:if(!this.slice_from("ate"))return!1;break;case 3:if(!this.slice_from("al"))return!1;break;case 4:if(!this.slice_from("ic"))return!1;break;case 5:if(!this.slice_del())return!1;break;case 6:if(!this.r_R2())return!1;if(!this.slice_del())return!1}return!0}r_Step_4(){let t,e;if(this.ket=this.cursor,t=this.find_among_b(o.a_7,18),0==t)return!1;if(this.bra=this.cursor,!this.r_R2())return!1;switch(t){case 0:return!1;case 1:if(!this.slice_del())return!1;break;case 2:var n=!0;t:for(;1==n;){n=!1,e=this.limit-this.cursor;let t=!0;for(;1==t&&(t=!1,this.eq_s_b("s"));)break t;if(this.cursor=this.limit-e,!this.eq_s_b("t"))return!1}if(!this.slice_del())return!1}return!0}r_Step_5(){let t,e,n;if(this.ket=this.cursor,t=this.find_among_b(o.a_8,2),0==t)return!1;switch(this.bra=this.cursor,t){case 0:return!1;case 1:var s=!0;t:for(;1==s;){s=!1,e=this.limit-this.cursor;let t=!0;for(;1==t&&(t=!1,this.r_R2());)break t;if(this.cursor=this.limit-e,!this.r_R1())return!1;{n=this.limit-this.cursor;let t=!0;for(;1==t&&(t=!1,this.r_shortv());)return!1;this.cursor=this.limit-n}}if(!this.slice_del())return!1;break;case 2:if(!this.r_R2())return!1;if(!this.eq_s_b("l"))return!1;if(!this.slice_del())return!1}return!0}r_exception2(){return this.ket=this.cursor,0!=this.find_among_b(o.a_9,8)&&(this.bra=this.cursor,!(this.cursor>this.limit_backward))}r_exception1(){let t;if(this.bra=this.cursor,t=this.find_among(o.a_10,18),0==t)return!1;if(this.ket=this.cursor,this.cursor<this.limit)return!1;switch(t){case 0:return!1;case 1:if(!this.slice_from("ski"))return!1;break;case 2:if(!this.slice_from("sky"))return!1;break;case 3:if(!this.slice_from("die"))return!1;break;case 4:if(!this.slice_from("lie"))return!1;break;case 5:if(!this.slice_from("tie"))return!1;break;case 6:if(!this.slice_from("idl"))return!1;break;case 7:if(!this.slice_from("gentl"))return!1;break;case 8:if(!this.slice_from("ugli"))return!1;break;case 9:if(!this.slice_from("earli"))return!1;break;case 10:if(!this.slice_from("onli"))return!1;break;case 11:if(!this.slice_from("singl"))return!1}return!0}r_postlude(){let t,e;if(!this.B_Y_found)return!1;t:for(;;){t=this.cursor;let n=!0;e:for(;1==n;){n=!1;n:for(;;){e=this.cursor;let t=!0;for(;1==t&&(t=!1,this.bra=this.cursor,this.eq_s("Y"));){this.ket=this.cursor,this.cursor=e;break n}if(this.cursor=e,this.cursor>=this.limit)break e;this.cursor++}if(!this.slice_from("y"))return!1;continue t}this.cursor=t;break}return!0}innerStem(){let t,e,n,s,i,r,o,a,c,u,l,h,g,p=!0;t:for(;1==p;){p=!1,t=this.cursor;let f=!0;for(;1==f&&(f=!1,this.r_exception1());)break t;this.cursor=t;let d=!0;e:for(;1==d;){d=!1;{e=this.cursor;let t=!0;for(;1==t;){t=!1;{const t=this.cursor+3;if(t<0||t>this.limit)break;this.cursor=t}break e}this.cursor=e}break t}this.cursor=t,n=this.cursor;let m=!0;for(;1==m&&(m=!1,this.r_prelude()););this.cursor=n,s=this.cursor;let y=!0;for(;1==y&&(y=!1,this.r_mark_regions()););this.cursor=s,this.limit_backward=this.cursor,this.cursor=this.limit,i=this.limit-this.cursor;let w=!0;for(;1==w&&(w=!1,this.r_Step_1a()););this.cursor=this.limit-i;let b=!0;e:for(;1==b;){b=!1,r=this.limit-this.cursor;let t=!0;for(;1==t&&(t=!1,this.r_exception2());)break e;this.cursor=this.limit-r,o=this.limit-this.cursor;let e=!0;for(;1==e&&(e=!1,this.r_Step_1b()););this.cursor=this.limit-o,a=this.limit-this.cursor;let n=!0;for(;1==n&&(n=!1,this.r_Step_1c()););this.cursor=this.limit-a,c=this.limit-this.cursor;let s=!0;for(;1==s&&(s=!1,this.r_Step_2()););this.cursor=this.limit-c,u=this.limit-this.cursor;let i=!0;for(;1==i&&(i=!1,this.r_Step_3()););this.cursor=this.limit-u,l=this.limit-this.cursor;let g=!0;for(;1==g&&(g=!1,this.r_Step_4()););this.cursor=this.limit-l,h=this.limit-this.cursor;let p=!0;for(;1==p&&(p=!1,this.r_Step_5()););this.cursor=this.limit-h}this.cursor=this.limit_backward,g=this.cursor;let v=!0;for(;1==v&&(v=!1,this.r_postlude()););this.cursor=g}return!0}}o.methodObject=new o,o.a_0=[new s("arsen",-1,-1),new s("commun",-1,-1),new s("gener",-1,-1)],o.a_1=[new s("'",-1,1),new s("'s'",0,1),new s("'s",-1,1)],o.a_2=[new s("ied",-1,2),new s("s",-1,3),new s("ies",1,2),new s("sses",1,1),new s("ss",1,-1),new s("us",1,-1)],o.a_3=[new s("",-1,3),new s("bb",0,2),new s("dd",0,2),new s("ff",0,2),new s("gg",0,2),new s("bl",0,1),new s("mm",0,2),new s("nn",0,2),new s("pp",0,2),new s("rr",0,2),new s("at",0,1),new s("tt",0,2),new s("iz",0,1)],o.a_4=[new s("ed",-1,2),new s("eed",0,1),new s("ing",-1,2),new s("edly",-1,2),new s("eedly",3,1),new s("ingly",-1,2)],o.a_5=[new s("anci",-1,3),new s("enci",-1,2),new s("ogi",-1,13),new s("li",-1,16),new s("bli",3,12),new s("abli",4,4),new s("alli",3,8),new s("fulli",3,14),new s("lessli",3,15),new s("ousli",3,10),new s("entli",3,5),new s("aliti",-1,8),new s("biliti",-1,12),new s("iviti",-1,11),new s("tional",-1,1),new s("ational",14,7),new s("alism",-1,8),new s("ation",-1,7),new s("ization",17,6),new s("izer",-1,6),new s("ator",-1,7),new s("iveness",-1,11),new s("fulness",-1,9),new s("ousness",-1,10)],o.a_6=[new s("icate",-1,4),new s("ative",-1,6),new s("alize",-1,3),new s("iciti",-1,4),new s("ical",-1,4),new s("tional",-1,1),new s("ational",5,2),new s("ful",-1,5),new s("ness",-1,5)],o.a_7=[new s("ic",-1,1),new s("ance",-1,1),new s("ence",-1,1),new s("able",-1,1),new s("ible",-1,1),new s("ate",-1,1),new s("ive",-1,1),new s("ize",-1,1),new s("iti",-1,1),new s("al",-1,1),new s("ism",-1,1),new s("ion",-1,2),new s("er",-1,1),new s("ous",-1,1),new s("ant",-1,1),new s("ent",-1,1),new s("ment",15,1),new s("ement",16,1)],o.a_8=[new s("e",-1,1),new s("l",-1,2)],o.a_9=[new s("succeed",-1,-1),new s("proceed",-1,-1),new s("exceed",-1,-1),new s("canning",-1,-1),new s("inning",-1,-1),new s("earring",-1,-1),new s("herring",-1,-1),new s("outing",-1,-1)],o.a_10=[new s("andes",-1,-1),new s("atlas",-1,-1),new s("bias",-1,-1),new s("cosmos",-1,-1),new s("dying",-1,3),new s("early",-1,9),new s("gently",-1,7),new s("howe",-1,-1),new s("idly",-1,6),new s("lying",-1,4),new s("news",-1,-1),new s("only",-1,10),new s("singly",-1,11),new s("skies",-1,2),new s("skis",-1,1),new s("sky",-1,-1),new s("tying",-1,5),new s("ugly",-1,8)],o.g_v=[17,65,16,1],o.g_v_WXY=[1,17,65,208,1],o.g_valid_LI=[55,141,2],t.exports=o},2316:(t,e,n)=>{const{Stopwords:s}=n(79);t.exports=class extends s{constructor(t,e){super(t),this.name="stopwords-en",this.dictionary={};const n=e||["about","above","after","again","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","below","between","both","but","by","came","can","cannot","come","could","did","do","does","doing","during","each","few","for","from","further","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","its","itself","like","make","many","me","might","more","most","much","must","my","myself","never","now","of","on","only","or","other","our","ours","ourselves","out","over","own","said","same","see","should","since","so","some","still","such","take","than","that","the","their","theirs","them","themselves","then","there","these","they","this","those","through","to","too","under","until","up","very","was","way","we","well","were","what","where","when","which","while","who","whom","with","would","why","you","your","yours","yourself","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","$","1","2","3","4","5","6","7","8","9","0","_"];this.build(n)}}},6257:(t,e,n)=>{const{Tokenizer:s}=n(79);t.exports=class extends s{constructor(t,e){super(t,e),this.name="tokenizer-en"}replace(t){let e=t.replace(/n't([ ,:;.!?]|$)/gi," not ");return e=e.replace(/can't([ ,:;.!?]|$)/gi,"can not "),e=e.replace(/'ll([ ,:;.!?]|$)/gi," will "),e=e.replace(/'s([ ,:;.!?]|$)/gi," is "),e=e.replace(/'re([ ,:;.!?]|$)/gi," are "),e=e.replace(/'ve([ ,:;.!?]|$)/gi," have "),e=e.replace(/'m([ ,:;.!?]|$)/gi," am "),e=e.replace(/'d([ ,:;.!?]|$)/gi," had "),e}replaceContractions(t){const e={cannot:["can","not"],gonna:["going","to"],wanna:["want","to"]},n=[];return t.forEach((t=>{const s=t.toLowerCase();Object.prototype.hasOwnProperty.call(e,s)?n.push(...e[s]):n.push(t)})),n}innerTokenize(t){const e=this.replace(t).split(/[\s,.!?;:([\]'")/]+/).filter((t=>t));return this.replaceContractions(e,t)}}},4326:t=>{t.exports=function(t){const e=t.get("Language");e&&e.addModel("Latin","eng"," ththe anhe nd andion ofof tio toto on  inal atiighghtrig rior entas ed is ll in  bee rne oneveralls tevet t frs a ha rety ery ord t prht  co eve he ang ts hisingbe yon shce reefreryon thermennatshapronaly ahases for hihalf tn an ont  pes o fod inceer onsrese sectityly l bry e eerse ian e o dectidomedoeedhtsteronare  no wh a  und f asny l ae pere en na winitnted aanyted dins stath perithe tst e cy tom soc arch t od ontis eequve ociman fuoteothess al acwitial mauni serea so onlitintr ty oencthiualt a eqtatquaive stalie wl oaref hconte led isundciae fle  lay iumaby  byhumf aic  huavege r a woo ams com meeass dtec lin een rattitplewheateo ts rt frot chciedisagearyo oancelino  fa susonincat ndahouwort inderomoms otg temetleitignis witlducd wwhiacthicaw law heichminimiorto sse e bntrtraeduountane dnstl pd nld ntas iblen p pun s atilyrththofulssidero ecatucauntien edo ph aeraindpensecn wommr s")}},1994:(t,e,n)=>{const s=n(7781);t.exports={Language:s}},7781:(t,e,n)=>{const s=n(6102),i=n(1250),r={cmn:/[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DB5\u4E00-\u9FCC\uF900-\uFA6D\uFA70-\uFAD9]|[\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]|\uD87E[\uDC00-\uDE1D]/g,Latin:/[A-Za-z\xAA\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02E0-\u02E4\u1D00-\u1D25\u1D2C-\u1D5C\u1D62-\u1D65\u1D6B-\u1D77\u1D79-\u1DBE\u1E00-\u1EFF\u2071\u207F\u2090-\u209C\u212A\u212B\u2132\u214E\u2160-\u2188\u2C60-\u2C7F\uA722-\uA787\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA7FF\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uFB00-\uFB06\uFF21-\uFF3A\uFF41-\uFF5A]/g,Cyrillic:/[\u0400-\u0484\u0487-\u052F\u1D2B\u1D78\u2DE0-\u2DFF\uA640-\uA69D\uA69F]/g,Arabic:/[\u0600-\u0604\u0606-\u060B\u060D-\u061A\u061E\u0620-\u063F\u0641-\u064A\u0656-\u065F\u066A-\u066F\u0671-\u06DC\u06DE-\u06FF\u0750-\u077F\u08A0-\u08B2\u08E4-\u08FF\uFB50-\uFBC1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFD\uFE70-\uFE74\uFE76-\uFEFC]|\uD803[\uDE60-\uDE7E]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]/g,ben:/[\u0980-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FB]/g,Devanagari:/[\u0900-\u0950\u0953-\u0963\u0966-\u097F\uA8E0-\uA8FB]/g,jpn:/[\u3041-\u3096\u309D-\u309F]|\uD82C\uDC01|\uD83C\uDE00|[\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C\uDC00/g,kor:/[\u1100-\u11FF\u302E\u302F\u3131-\u318E\u3200-\u321E\u3260-\u327E\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/g,tel:/[\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C78-\u0C7F]/g,tam:/[\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA]/g,guj:/[\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1]/g,kan:/[\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2]/g,mal:/[\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D75\u0D79-\u0D7F]/g,Myanmar:/[\u1000-\u109F\uA9E0-\uA9FE\uAA60-\uAA7F]/g,ori:/[\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77]/g,pan:/[\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75]/g,Ethiopic:/[\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]/g,tha:/[\u0E01-\u0E3A\u0E40-\u0E5B]/g,sin:/[\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4]|\uD804[\uDDE1-\uDDF4]/g,ell:/[\u0370-\u0373\u0375-\u0377\u037A-\u037D\u037F\u0384\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03E1\u03F0-\u03FF\u1D26-\u1D2A\u1D5D-\u1D61\u1D66-\u1D6A\u1DBF\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u2126\uAB65]|\uD800[\uDD40-\uDD8C\uDDA0]|\uD834[\uDE00-\uDE45]/g,khm:/[\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF]/g,hye:/[\u0531-\u0556\u0559-\u055F\u0561-\u0587\u058A\u058D-\u058F\uFB13-\uFB17]/g,sat:/[\u1C50-\u1C7F]/g,bod:/[\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FD4\u0FD9\u0FDA]/g,Hebrew:/[\u0591-\u05C7\u05D0-\u05EA\u05F0-\u05F4\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFB4F]/g,kat:/[\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u10FF\u2D00-\u2D25\u2D27\u2D2D]/g,lao:/[\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF]/g,zgh:/[\u2D30-\u2D67\u2D6F\u2D70\u2D7F]/g,iii:/[\uA000-\uA48C\uA490-\uA4C6]/g,aii:/[\u0700-\u070D\u070F-\u074A\u074D-\u074F]/g},o=Object.keys(r);class a{constructor(){this.languagesAlpha3={},this.languagesAlpha2={},this.extraSentences=[],this.buildData()}static getTrigrams(t){const e=[],n=t?` ${String(t).replace(/[\u0021-\u0040]+/g," ").replace(/\s+/g," ").trim().toLowerCase()} `:"";if(!n||n.length<3)return e;for(let t=0,s=n.length-2;t<s;t+=1)e[t]=n.substr(t,3);return e}static asTuples(t){const e=a.getTrigrams(t).reduce(((t,e)=>{const n=t;return n[e]=(n[e]||0)+1,n}),{}),n=[];return Object.keys(e).forEach((t=>{n.push([t,e[t]])})),n.sort(((t,e)=>t[1]-e[1])),n}static getDistance(t,e){let n=0;return t.forEach((t=>{n+=t[0]in e?Math.abs(t[1]-e[t[0]]-1):300})),n}static getOccurrence(t,e){const n=t.match(e);return(n?n.length:0)/t.length||0}static isLatin(t){let e=0;const n=t.length/2;for(let s=0;s<t.length;s+=1){const i=t.charCodeAt(s);if(i>=32&&i<=126&&(e+=1,e>n))return!0}return e>n}static getTopScript(t){if(a.isLatin(t))return["Latin",1];let e,n=-1;for(let s=0;s<o.length;s+=1){const i=o[s],c=a.getOccurrence(t,r[i]);if(c>n&&(n=c,e=i,1===n))return[e,n]}return[e,n]}static filterLanguages(t,e,n){if(0===e.length&&0===n.length)return t;const s={};return Object.keys(t).forEach((i=>{(0===e.length||e.indexOf(i)>-1)&&-1===n.indexOf(i)&&(s[i]=t[i])})),s}static getDistances(t,e,n){const s=[],i=n.allowList||[],r=n.denyList||[],o=a.filterLanguages(e,i,r);return o?(Object.keys(o).forEach((e=>{s.push([e,a.getDistance(t,o[e])])})),s.sort(((t,e)=>t[1]-e[1]))):[["und",1]]}static detectAll(t,e={}){const n=e.minLength||10;if(!t||t.length<n)return[["und",1]];const s=t.substr(0,2048),r=a.getTopScript(s);if(!(r[0]in i)&&r[1]>.5){if(!e.allowList)return[[r[0],1]];if(e.allowList.includes(r[0]))return[[r[0],1]];if("cmn"===r[0]&&e.allowList.includes("jpn"))return[["jpn",1]]}if(i[r[0]]){const t=a.getDistances(a.asTuples(s),i[r[0]],e);if("und"===t[0][0])return[[r[0],1]];const n=t[0][1],o=300*s.length-n;return t.map((t=>[t[0],1-(t[1]-n)/o||0]))}return[[r[0],1]]}buildData(){for(let t=0;t<s.length;t+=1){const e={alpha2:s[t][0],alpha3:s[t][1],name:s[t][2]};this.languagesAlpha3[e.alpha3]=e,this.languagesAlpha2[e.alpha2]=e}}transformAllowList(t){const e=[];for(let n=0;n<t.length;n+=1)if(3===t[n].length)e.push(t[n]);else{const s=this.languagesAlpha2[t[n]];s&&e.push(s.alpha3)}return e}guess(t,e,n){const s={};t.length<10&&(s.minLength=t.length),e&&e.length&&e.length>0&&(s.allowList=this.transformAllowList(e));const i=a.detectAll(t,s),r=[];for(let t=0;t<i.length;t+=1){const e=this.languagesAlpha3[i[t][0]];if(e&&(r.push({alpha3:e.alpha3,alpha2:e.alpha2,language:e.name,score:i[t][1]}),n&&r.length>=n))break}return r}guessBest(t,e){return this.guess(t,e,1)[0]}addTrigrams(t,e){const n=this.languagesAlpha2[t],s=n?n.alpha3:t,r=a.getTopScript(e)[0],o=a.getTrigrams(e);i[r]&&(i[r][s]||(i[r][s]={}),o.forEach((t=>{i[r][s][t]=1})))}addExtraSentence(t,e){this.extraSentences.push([t,e]),this.addTrigrams(t,e)}processExtraSentences(){this.extraSentences.forEach((t=>{this.addTrigrams(t[0],t[1])}))}static lansplit(t){if(t.includes("|"))return t.split("|");const e=[];for(let n=0;n<t.length;n+=3)e.push(t.substr(n,3));return e}static addModel(t,e,n){const s=i[t],r=a.lansplit(n);let o=r.length;const c={};for(;o>0;)o-=1,c[r[o]]=o;s[e]=c}addModel(t,e,n){a.addModel(t,e,n)}static buildModel(){Object.keys(i).forEach((t=>{const e=i[t];Object.keys(e).forEach((n=>{a.addModel(t,n,e[n])}))}))}}a.buildModel(),t.exports=a},1987:(t,e,n)=>{const{defaultContainer:s}=n(79),i=n(8517);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="extract-builtin"}extract(t){return t}async run(t){const e=t,n=e.locale||"en",s=this.container.get(`extract-builtin-${n}`)||this,r=await s.extract({text:e.text||e.utterance,locale:e.locale});if(e.edges=e.edges||[],r.edges)for(let t=0;t<r.edges.length;t+=1)e.nerLimitToEntities&&!e.intentEntities.includes(r.edges[t].entity)||e.edges.push(r.edges[t]);if(e.edges=i(e.edges,!1),e.sourceEntities=e.sourceEntities||[],r.sourceEntities)for(let t=0;t<r.sourceEntities.length;t+=1)e.sourceEntities.push(r.sourceEntities[t]);return e}}},2765:(t,e,n)=>{const{defaultContainer:s}=n(79),{Language:i}=n(1994),{similarity:r}=n(6964),o=n(8517);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="extract-enum"}getScripts(t){const e=[],n=t.split("");for(let t=0;t<n.length;t+=1)e.push(i.getTopScript(n[t]));return e}isAlphanumeric(t){return/[\u00C0-\u1FFF\u2C00-\uD7FF\w]/.test(t)&&"_"!==t}getWordPositions(t){const e=this.getScripts(t);let n=!0,s=0,i=0;const r=t.length,o=[];for(;i<r;)this.isAlphanumeric(t.charAt(i))?n&&("cmn"===e[i][0]?(o.push({start:i,end:i,len:1}),s=i):(s=i,n=!1)):n||(o.push({start:s,end:i-1,len:i-s}),n=!0),i+=1;return n||o.push({start:s,end:i-1,len:i-s}),o}getBestSubstring(t,e,n){const s=t.length,i=e.length;if(s<=i){const n={start:0,end:s-1,len:s,levenshtein:r(t,e,!0)};return n.accuracy=(i-n.levenshtein)/i,n}const o=n||this.getWordPositions(t),a=o.length,c={start:0,end:0,len:0,levenshtein:void 0,accuracy:0};for(let n=0;n<a;n+=1)for(let s=n;s<a;s+=1){const i=t.substring(o[n].start,o[s].end+1),a=r(i,e,!0);(void 0===c.levenshtein||a<c.levenshtein)&&(c.levenshtein=a,c.start=o[n].start,c.end=o[s].end,c.len=c.end-c.start+1)}return c.accuracy=(i-c.levenshtein)/i,c}getBestSubstringList(t,e,n,s=1){const i=t.length,o=e.length,a=[];if(i<=o){const n=r(t,e,!0),c=(o-n)/o;return c>=s&&a.push({start:0,end:i-1,len:i,levenshtein:n,accuracy:c}),a}const c=o*(1-s),u=n||this.getWordPositions(t),l=u.length;for(let n=0;n<l;n+=1)for(let i=n;i<l;i+=1){const l=t.substring(u[n].start,u[i].end+1),h=r(l,e,!0),g=(o-h)/o;if(g>=s&&a.push({start:u[n].start,end:u[i].end,len:u[i].end-u[n].start+1,levenshtein:h,accuracy:g}),l.length-u[0].len>=e.length+c)break}return a}getRules(t){return t.nerRules||[]}normalize(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}buildRuleDict(t){const e={},n={};for(let s=0;s<t.rules.length;s+=1){const i=t.rules[s];for(let t=0;t<i.texts.length;t+=1){const s=i.texts[t],r=this.normalize(i.texts[t]);e[r]||(e[r]=[]),e[r].push(i),n[r]=s}}t.dict=e,t.inverseDict=n}getBestExact(t,e,n){const s=this.normalize(t),i=e||this.getWordPositions(s),r=i.length,o=[];for(let e=0;e<r;e+=1)for(let a=e;a<r;a+=1){const r=s.substring(i[e].start,i[a].end+1);if(n.dict[r]){const s=n.dict[r];for(let c=0;c<s.length;c+=1)o.push({accuracy:1,start:i[e].start,end:i[a].end,len:i[a].end-i[e].start+1,levenshtein:0,entity:n.name,type:n.type,option:s[c].option,sourceText:n.inverseDict[r],utteranceText:t.substring(i[e].start,i[a].end+1)})}}return o}extractFromRule(t,e,n,s){if("enum"===e.type){const i=[];if(s>=1){e.dict||this.buildRuleDict(e);const s=this.getBestExact(t,n,e);for(let t=0;t<s.length;t+=1)i.push(s[t])}else for(let r=0;r<e.rules.length;r+=1){const o=e.rules[r];if(o&&o.option&&Array.isArray(o.texts))for(let a=0;a<o.texts.length;a+=1){const c=this.getBestSubstringList(t,o.texts[a],n,o.threshold||s);for(let n=0;n<c.length;n+=1)i.push({...c[n],entity:e.name,type:e.type,option:e.rules[r].option,sourceText:o.texts[a],utteranceText:t.substring(c[n].start,c[n].end+1)})}}return i}return[]}async extract(t){const e=t,n=e.text||e.utterance;let s=n;const i=[],r=this.container.get("tokenize");if(r){const t=await r.run({locale:e.locale,text:s});if(s=t.tokens.join(" "),s!==n){let e=0,s=0;for(let r=0;r<t.tokens.length;r+=1){const o=n.indexOf(t.tokens[r],e);for(let e=0;e<t.tokens[r].length;e+=1)i[s+e]=o+e;e+=t.tokens[r].length,s+=t.tokens[r].length+1}}}const a=this.getWordPositions(s),c=this.getRules(e),u=e.edges||[];for(let t=0;t<c.length;t+=1){const n=this.extractFromRule(s,c[t],a,e.threshold||.8);for(let t=0;t<n.length;t+=1)u.push(n[t])}if(i.length>0)for(let t=0;t<u.length;t+=1){const e=u[t];e.start=i[e.start],e.end=i[e.end]}return u.sort(((t,e)=>t.start-e.start)),e.edges=o(u,!1,e.intentEntities),e}run(t){const e=t,n=e.locale||"en";return(this.container.get(`extract-enum-${n}`)||this).extract(e)}}},3013:(t,e,n)=>{const{defaultContainer:s}=n(79),i=n(8517);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="extract-regex"}getRules(t){return t.nerRules||[]}getMatchs(t,e){const n=[];let s;do{const i=e instanceof RegExp?e.exec(t):null;if(i){if(1===i.length)n.push({start:i.index,end:e.lastIndex-1,accuracy:1,sourceText:i[0]});else{const e=t.indexOf(i[1]);n.push({start:e,end:e+i[1].length-1,accuracy:1,sourceText:i[1]})}s=!0}else s=!1}while(s);return n}extractFromRule(t,e){const n=[];for(let s=0;s<e.rules.length;s+=1){const i=this.getMatchs(t,e.rules[s]);for(let s=0;s<i.length;s+=1){const r=i[s];r.entity=e.name,r.type=e.type,r.utteranceText=t.substring(r.start,r.end+1),r.len=r.utteranceText.length,n.push(r)}}return n}extract(t){const e=t,n=this.getRules(e),s=e.edges||[];for(let t=0;t<n.length;t+=1){const i=this.extractFromRule(e.text||e.utterance,n[t]);for(let t=0;t<i.length;t+=1)s.push(i[t])}return s.sort(((t,e)=>t.start-e.start)),e.edges=i(s,!1),e}run(t){const e=t,n=e.locale||"en";return(this.container.get(`extract-regex-${n}`)||this).extract(e)}}},22:(t,e,n)=>{const{defaultContainer:s}=n(79),i=n(8517),{TrimType:r}=n(1720);t.exports=class{constructor(t=s){this.container=t.container||t,this.name="extract-trim"}mustSkip(t,e){if(e.options&&e.options.skip&&e.options.skip.length>0)for(let n=0;n<e.options.skip.length;n+=1){const s=e.options.skip[n];if(e.options.caseSensitive){if(s===t)return!0}else if(s.toLowerCase()===t.toLowerCase())return!0}return!1}matchBetween(t,e,n){const s=[];let i;do{const o=e.regex.exec(` ${t} `);if(o){let t,a,c;if(e&&e.options&&e.options.closest){if(t=1,!o[t]){i=!1;break}const e=o[0].indexOf(o[t]);a=o.index-1+e,c=a+o[t].length-1}else t=0,a=o.index-1,c=e.regex.lastIndex-2;s.push({type:"trim",subtype:r.Between,start:a,end:c,len:o[t].length,accuracy:1,sourceText:o[t],utteranceText:o[t],entity:n}),i=!0}else i=!1}while(i);const o=[];for(let t=0;t<s.length;t+=1)this.mustSkip(s[t].utteranceText,e)||o.push(s[t]);return o}findWord(t,e,n=!1,s=!1){const i=[];let r;const o=new RegExp(s?e:` ${e} | ${e}|${e} `,n?"g":"ig");do{const e=o.exec(t);e?(i.push({start:e.index,end:o.lastIndex}),r=!0):r=!1}while(r);return i}getBeforeResults(t,e,n){const s=[];let i=0,o=0;for(let a=0;a<e.length;a+=1){o=e[a].start;const c=t.substring(i,o);s.push({type:"trim",subtype:r.Before,start:i,end:o-1,len:c.length,accuracy:.99,sourceText:c,utteranceText:c,entity:n}),i=e[a].end}return s}getBeforeFirstResults(t,e,n){const s=[],i=e[0].start,o=t.substring(0,i);return s.push({type:"trim",subtype:r.BeforeFirst,start:0,end:i-1,len:o.length,accuracy:.99,sourceText:o,utteranceText:o,entity:n}),s}getBeforeLastResults(t,e,n){const s=[],i=e[e.length-1].start,o=t.substring(0,i);return s.push({type:"trim",subtype:r.BeforeLast,start:0,end:i-1,len:o.length,accuracy:.99,sourceText:o,utteranceText:o,entity:n}),s}getAfterResults(t,e,n){const s=[];let i=0,o=t.length;for(let a=e.length-1;a>=0;a-=1){i=e[a].end;const c=t.substring(i,o);s.unshift({type:"trim",subtype:r.After,start:i,end:o-1,len:c.length,accuracy:.99,sourceText:c,utteranceText:c,entity:n}),o=e[a].start}return s}getAfterFirstResults(t,e,n){const s=[],i=e[0].end,o=t.length,a=t.substring(i,o);return s.push({type:"trim",subtype:r.AfterFirst,start:i,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),s}getAfterLastResults(t,e,n){const s=[],i=e[e.length-1].end,o=t.length,a=t.substring(i,o);return s.push({type:"trim",subtype:r.AfterLast,start:i,end:o-1,len:a.length,accuracy:.99,sourceText:a,utteranceText:a,entity:n}),s}getResults(t,e,n,s){switch(n){case r.Before:return this.getBeforeResults(t,e,s);case r.BeforeFirst:return this.getBeforeFirstResults(t,e,s);case r.BeforeLast:return this.getBeforeLastResults(t,e,s);case r.After:return this.getAfterResults(t,e,s);case r.AfterFirst:return this.getAfterFirstResults(t,e,s);case r.AfterLast:return this.getAfterLastResults(t,e,s);default:return[]}}match(t,e,n,s){const i=[];if(e&&Array.isArray(e.words))for(let r=0;r<e.words.length;r+=1){const o=e.options.noSpaces?e.words[r]:` ${e.words[r]}`,a=this.findWord(t,o);if(!e.options.noSpaces){const n=this.findWord(t,e.words[r]);n.length>0&&0===n[0].start&&a.unshift(n[0])}a.length>0&&i.push(...this.getResults(t,a,n,s))}const r=[];for(let t=0;t<i.length;t+=1)i[t].sourceText=i[t].sourceText.replace(/^[\s,.!?;:([\]'")/]+|[\s,.!?;:([\]'")/]+$/,""),this.mustSkip(i[t].utteranceText,e)||r.push(i[t]);return r}getRules(t){return t.nerRules||[]}extractFromRule(t,e){const n=[];for(let s=0;s<e.rules.length;s+=1){const i=e.rules[s];i.type===r.Between?n.push(...this.matchBetween(t,i,e.name)):n.push(...this.match(t,i,i.type,e.name))}return n}extract(t){const e=t,n=this.getRules(e),s=e.edges||[];for(let t=0;t<n.length;t+=1){const i=this.extractFromRule(e.text||e.utterance,n[t]);for(let t=0;t<i.length;t+=1)s.push(i[t])}return s.sort(((t,e)=>t.start-e.start)),e.edges=i(s,!1),e}run(t){const e=t,n=e.locale||"en";return(this.container.get(`extract-trim-${n}`)||this).extract(e)}}},3229:(t,e,n)=>{const s=n(8086),i=n(2765),r=n(3013),o=n(22),a=n(1987);t.exports={Ner:s,ExtractorEnum:i,ExtractorRegex:r,ExtractorTrim:o,ExtractorBuiltin:a}},8086:(t,e,n)=>{const{Clonable:s}=n(79),i=n(2765),r=n(3013),o=n(22),a=n(1987),{TrimType:c}=n(1720);class u extends s{constructor(t={},e=void 0){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.applySettings(this.settings),this.settings.tag||(this.settings.tag="ner"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.rules={},this.applySettings(this,{pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){}getRulesByName(t="*",e="",n=!1){if(!this.rules[t]){if(!n)return;this.rules[t]={}}if(!this.rules[t][e]){if(!n)return;this.rules[t][e]={name:e,type:"enum",rules:[]}}return this.rules[t][e]}addRule(t="*",e,n,s){if(Array.isArray(t))for(let i=0;i<t.length;i+=1)this.addRule(t[i],e,n,s);else this.rules[t]||(this.rules[t]={}),this.rules[t][e]||(this.rules[t][e]={name:e,type:n,rules:[]}),this.rules[t][e].rules.push(s)}asString(t){if(t){if(null!=(e=t)&&e.constructor===Object)return JSON.stringify(t);if(t.toString)return t.toString()}var e;return""}findRule(t,e){const n=this.asString(e);for(let e=0;e<t.length;e+=1)if(this.asString(t[e])===n)return e;return-1}removeRule(t="*",e,n){if(this.rules[t]&&this.rules[t][e])if(n){const s=this.findRule(this.rules[t][e].rules,n);s>-1&&this.rules[t][e].rules.splice(s,1)}else delete this.rules[t][e]}getRules(t="*"){const e=[];if(this.rules[t]){const n=Object.keys(this.rules[t]);for(let s=0;s<n.length;s+=1)e.push(this.rules[t][n[s]])}if("*"!==t&&this.rules["*"]){const t=Object.keys(this.rules["*"]);for(let n=0;n<t.length;n+=1)e.push(this.rules["*"][t[n]])}return e}decideRules(t,e){const n=t;let s=this.getRules(n.locale||"en");if(e&&this.settings.considerOnlyIntentEntities)s=s.filter((t=>e.includes(t.name)));else if(e){const t=[],n=[];s.forEach((s=>{e.includes(s.name)?t.push(s):n.push(s)})),s=t.concat(n)}return n.nerRules=s,n.nerLimitToEntities=this.settings.considerOnlyIntentEntities,n.intentEntities=e,n}getRuleOption(t,e){for(let n=0;n<t.length;n+=1)if(t[n].option===e)return t[n]}addRuleOptionTexts(t,e,n,s){if(Array.isArray(t))for(let i=0;i<t.length;i+=1)this.addRuleOptionTexts(t[i],e,n,s);else{let i=s||n;Array.isArray(i)||(i=[i]);const r=this.getRulesByName(t,e,!0);let o=this.getRuleOption(r.rules,n);if(o){const t={};for(let e=0;e<o.texts.length;e+=1)t[o.texts[e]]=1;for(let e=0;e<i.length;e+=1)t[i[e]]=1;o.texts=Object.keys(t)}else o={option:n,texts:i},r.rules.push(o)}}removeRuleOptionTexts(t,e,n,s){if(Array.isArray(t))for(let i=0;i<t.length;i+=1)this.removeRuleOptionTexts(t[i],e,n,s);else{let i=s||n;Array.isArray(i)||(i=[i]);const r=this.getRulesByName(t,e,!1);if(r){const t=this.getRuleOption(r.rules,n);if(t){const e={};for(let n=0;n<t.texts.length;n+=1)e[t.texts[n]]=1;for(let t=0;t<i.length;t+=1)delete e[i[t]];t.texts=Object.keys(e)}}}}static str2regex(t){const e=t.lastIndexOf("/");return new RegExp(t.slice(1,e),t.slice(e+1))}static regex2str(t){return t.toString()}addRegexRule(t,e,n){const s="string"==typeof n?u.str2regex(n):n,i=s.flags.includes("g")?s:new RegExp(s.source,`${s.flags}g`);this.addRule(t,e,"regex",i)}addBetweenLastCondition(t,e,n,s,i={}){const r={...i,closest:!0};this.addBetweenCondition(t,e,n,s,r)}addBetweenCondition(t,e,n,s,i){const r=i||{},o=Array.isArray(n)?n:[n],a=Array.isArray(s)?s:[s],c=[];for(let t=0;t<o.length;t+=1)for(let e=0;e<a.length;e+=1){const n=!0===r.noSpaces?o[t]:` ${o[t]} `,s=!0===r.noSpaces?a[e]:` ${a[e]} `;let i;i=!0===r.closest?`${n}(?!.*${n}.*)(.*)${s}`:`(?<=${n})(.*)(?=${s})`,c.push(i)}let l=`/${c.join("|")}/g`;!0!==r.caseSensitive&&(l+="i");const h={type:"between",leftWords:o,rightWords:a,regex:u.str2regex(l),options:r};this.addRule(t,e,"trim",h)}addPositionCondition(t,e,n,s,i){const r=i||{},o={type:n,words:Array.isArray(s)?s:[s],options:r};this.addRule(t,e,"trim",o)}addAfterCondition(t,e,n,s){this.addPositionCondition(t,e,c.After,n,s)}addAfterFirstCondition(t,e,n,s){this.addPositionCondition(t,e,c.AfterFirst,n,s)}addAfterLastCondition(t,e,n,s){this.addPositionCondition(t,e,c.AfterLast,n,s)}addBeforeCondition(t,e,n,s){this.addPositionCondition(t,e,c.Before,n,s)}addBeforeFirstCondition(t,e,n,s){this.addPositionCondition(t,e,c.BeforeFirst,n,s)}addBeforeLastCondition(t,e,n,s){this.addPositionCondition(t,e,c.BeforeLast,n,s)}reduceEdges(t){return t.entities=t.edges,delete t.edges,delete t.nerRules,delete t.nerLimitToEntities,delete t.intentEntities,t}async defaultPipelineProcess(t,e){this.cache||(this.cache={extractEnum:this.container.get("extract-enum"),extractRegex:this.container.get("extract-regex"),extractTrim:this.container.get("extract-trim"),extractBuiltin:this.container.get("extract-builtin")},this.cache.extractEnum||(this.container.use(i),this.cache.extractEnum=this.container.get("extract-enum")),this.cache.extractRegex||(this.container.use(r),this.cache.extractRegex=this.container.get("extract-regex")),this.cache.extractTrim||(this.container.use(o),this.cache.extractTrim=this.container.get("extract-trim")),this.cache.extractBuiltin||(this.container.use(a),this.cache.extractBuiltin=this.container.get("extract-builtin")));let n=await this.decideRules(t,e);return this.cache.extractEnum&&(n=await this.cache.extractEnum.run(n)),this.cache.extractRegex&&(n=await this.cache.extractRegex.run(n)),this.cache.extractTrim&&(n=await this.cache.extractTrim.run(n)),this.cache.extractBuiltin&&(n=await this.cache.extractBuiltin.run(n)),n=await this.reduceEdges(n),n}async process(t,e){const n={threshold:this.settings.threshold||.8,...t};let s;if(n.locale){const t=this.container.getPipeline(`${this.settings.tag}-${n.locale}-process`);t&&(s=await this.runPipeline(n,t))}else this.pipelineProcess&&(s=await this.runPipeline(n,this.pipelineProcess));return s?e&&(s.entities=s.entities.filter((t=>e.includes(t.entity)))):s=await this.defaultPipelineProcess(n,e),delete s.threshold,s}nameToEntity(t){return`${void 0===this.settings.entityPreffix?"@":this.settings.entityPreffix}${t}${void 0===this.settings.entitySuffix?"":this.settings.entitySuffix}`}entityToName(t){if(!t)return t;let e=t;const n=void 0===this.settings.entityPreffix?"@":this.settings.entityPreffix,s=void 0===this.settings.entitySuffix?"":this.settings.entitySuffix;if(n){if(!e.startsWith(n))return t;e=e.slice(n.length)}if(s){if(!e.endsWith(s))return t;e=e.slice(0,-s.length)}return e}isEntity(t){return this.entityToName(t)!==t}getEntitiesFromUtterance(t,e){e||(e=t,t="es");const n=e.split(/[\s,.!?;:([\]'")/]+/).filter((t=>t)),s=[];for(let t=0;t<n.length;t+=1){const e=n[t];this.isEntity(e)&&s.push(this.entityToName(e))}return s}async generateEntityUtterance(t,e){let n={locale:t,utterance:e};n=await this.process(n);const{entities:s}=n;if(!s||!s.length)return e;s.sort(((t,e)=>t.start-e.start));let i=0,r="";for(let t=0;t<s.length;t+=1){const n=s[t],o=e.slice(i,n.start);i=n.end+1,r+=o,r+=this.nameToEntity(n.entity)}return r+=e.slice(s[s.length-1].end+1),r}toJSON(){RegExp.prototype.toJSON=RegExp.prototype.toString;const t={settings:{...this.settings},rules:{...this.rules}};return delete t.settings.container,t}fromJSON(t){this.applySettings(this.settings,t.settings),Object.keys(t.rules).forEach((e=>{Object.keys(t.rules[e]).forEach((n=>{t.rules[e][n].rules="regex"===t.rules[e][n].type?t.rules[e][n].rules.map((t=>u.str2regex(t))):t.rules[e][n].rules.map((t=>"string"==typeof t.regex?{...t,regex:u.str2regex(t.regex)}:t))}))})),this.rules=t.rules}}t.exports=u},8517:(t,e,n)=>{const{TrimTypesList:s}=n(1720);function i(t,e,n,s=[]){let i,r;if(t.accuracy>e.accuracy||t.accuracy===e.accuracy&&t.length>e.length?(i=t,r=e):(i=e,r=t),r.start<=i.end&&r.end>=i.start)if(r.accuracy<i.accuracy)r.discarded=!0;else if((n||r.entity===i.entity||"number"===r.entity)&&r.len<=i.len)r.start===i.start&&r.end===i.end&&r.type===i.type&&r.entity===i.entity&&r.option===i.option?r.discarded=!0:r.start===i.start&&r.end===i.end&&r.entity===i.entity&&r.type!==i.type&&("trim"===i.type&&"trim"!==r.type?i.discarded=!0:("trim"!==i.type&&r.type,r.discarded=!0));else if((n||r.entity===i.entity||"number"===i.entity)&&r.len>i.len)i.discarded=!0;else if("enum"===i.type&&"enum"===r.type){const t=s.includes(i.entity),e=s.includes(r.entity);t&&!e?r.discarded=!0:!t&&e||i.len<=r.len&&r.utteranceText.includes(i.utteranceText)?i.discarded=!0:i.len>r.len&&i.utteranceText.includes(r.utteranceText)&&(r.discarded=!0)}}t.exports=function(t,e=!0,n=[]){const r=(t=function(t){for(let e=0,n=t.length;e<n;e+=1){const n=t[e];if("trim"===n.type&&s.includes(n.subtype))for(let s=0;s<t.length;s+=1){const i=t[s];if(e!==s&&i.start>=n.start&&i.end<=n.end&&"trim"!==i.type){const t=n.end-n.start,e=i.end-i.start;if(n.end===i.end){const s=n.sourceText.substring(0,t-e-1);n.sourceText=s,n.utteranceText=s,n.end=i.start-1,n.len=s.length}else if(n.start===i.start){const t=n.sourceText.substring(e+1);n.sourceText=t,n.utteranceText=t,n.start=i.end+1,n.len=t.length}}}}return t}(t)).length;for(let s=0;s<r;s+=1){const o=t[s];if(0===o.len&&(o.discarded=!0),!o.discarded)for(let a=s+1;a<r;a+=1){const s=t[a];if(s.discarded||i(o,s,e,n),o.discarded)break}if(!o.discarded){const t=n.indexOf(o.entity);-1!==t&&n.splice(t,1)}}return t.filter((t=>!t.discarded))}},1720:t=>{const e={Between:"between",After:"after",AfterLast:"afterLast",AfterFirst:"afterFirst",Before:"before",BeforeFirst:"beforeFirst",BeforeLast:"beforeLast"},n=Object.values(e);t.exports={TrimType:e,TrimTypesList:n}},189:(t,e,n)=>{const s=n(8462);t.exports=class{constructor(t,e){if(t){this.inputLookup=new s,this.outputLookup=new s;for(let e=0;e<t.length;e+=1)this.inputLookup.add(t[e]);for(let t=0;t<e.length;t+=1)this.outputLookup.add(e[t]);this.numInputs=this.inputLookup.items.length,this.numOutputs=this.outputLookup.items.length}}build(t){this.inputLookup=new s(t,"input"),this.outputLookup=new s(t,"output"),this.numInputs=this.inputLookup.items.length,this.numOutputs=this.outputLookup.items.length;const e=[];for(let n=0;n<t.length;n+=1){const{input:s,output:i}=t[n];e.push({input:this.inputLookup.prepare(s),output:this.outputLookup.prepare(i)})}return e}transformInput(t){return this.inputLookup.prepare(t)}}},165:(t,e,n)=>{const s=n(2892);t.exports={NeuralNetwork:s}},8462:t=>{t.exports=class{constructor(t,e="input"){this.dict={},this.items=[],t&&this.buildFromData(t,e)}add(t){void 0===this.dict[t]&&(this.dict[t]=this.items.length,this.items.push(t))}buildFromData(t,e){for(let n=0;n<t.length;n+=1){const s=t[n][e],i=Object.keys(s);for(let t=0;t<i.length;t+=1)this.add(i[t])}}prepare(t){const e=Object.keys(t),n=[],s={};for(let i=0;i<e.length;i+=1){const r=e[i];void 0!==this.dict[r]&&(n.push(this.dict[r]),s[this.dict[r]]=t[r])}return{keys:n,data:s}}}},2892:(t,e,n)=>{const s=n(189),i={iterations:2e4,errorThresh:5e-5,deltaErrorThresh:1e-6,learningRate:.6,momentum:.5,alpha:.07,log:!1};t.exports=class{constructor(t={}){this.settings=t,this.applySettings(this.settings,i),!0===this.settings.log?this.logFn=(t,e)=>console.log(`Epoch ${t.iterations} loss ${t.error} time ${e}ms`):"function"==typeof this.settings.log&&(this.logFn=this.settings.log)}applySettings(t={},e={}){return Object.keys(e).forEach((n=>{void 0===t[n]&&(t[n]=e[n])})),t}initialize(t,e){this.perceptronsByName={},this.perceptrons=[],this.outputs={},this.numPerceptrons=e.length;for(let n=0;n<e.length;n+=1){const s=e[n];this.outputs[s]=0;const i={name:s,id:n,weights:new Float32Array(t),changes:new Float32Array(t),bias:0};this.perceptrons.push(i),this.perceptronsByName[s]=i}}runInputPerceptron(t,e){const n=e.keys.reduce(((n,s)=>n+e.data[s]*t.weights[s]),t.bias);return n<=0?0:this.settings.alpha*n}runInput(t){for(let e=0;e<this.numPerceptrons;e+=1)this.outputs[this.perceptrons[e].name]=this.runInputPerceptron(this.perceptrons[e],t);return this.outputs}get isRunnable(){return!!this.numPerceptrons}run(t){return this.numPerceptrons?this.runInput(this.lookup.transformInput(t)):void 0}prepareCorpus(t){return this.lookup=new s,this.lookup.build(t)}verifyIsInitialized(){this.perceptrons||this.initialize(this.lookup.numInputs,this.lookup.outputLookup.items)}trainPerceptron(t,e){const{alpha:n,momentum:s}=this.settings,{changes:i,weights:r}=t;let o=0;for(let a=0;a<e.length;a+=1){const{input:c,output:u}=e[a],l=this.runInputPerceptron(t,c),h=(u.data[t.id]||0)-l;if(h){o+=h**2;const e=(l>0?1:n)*h*this.decayLearningRate;for(let t=0;t<c.keys.length;t+=1){const n=c.keys[t],o=e*c.data[n]+s*i[n];i[n]=o,r[n]+=o}t.bias+=e}}return o}train(t){if(!t||!t.length)return{};if(void 0!==t[t.length-1].input.nonefeature){const e={};for(let n=0;n<t.length-1;n+=1){const s=Object.keys(t[n].output);for(let t=0;t<s.length;t+=1)e[s[t]]||(e[s[t]]=1)}const n=t[t.length-1],s=Object.keys(e);for(let t=0;t<s.length;t+=1)n.output[s[t]]=1e-7}const e=this.prepareCorpus(t);this.status||(this.status={error:1/0,deltaError:1/0,iterations:0}),this.verifyIsInitialized();const n=this.settings.errorThresh,s=this.settings.deltaErrorThresh;for(;this.status.iterations<this.settings.iterations&&this.status.error>n&&this.status.deltaError>s;){const t=new Date;this.status.iterations+=1,this.decayLearningRate=this.settings.learningRate/(1+.001*this.status.iterations);const n=this.status.error;this.status.error=0;for(let t=0;t<this.numPerceptrons;t+=1)this.status.error+=this.trainPerceptron(this.perceptrons[t],e);this.status.error/=this.numPerceptrons*e.length,this.status.deltaError=Math.abs(this.status.error-n);const s=new Date;this.logFn&&this.logFn(this.status,s.getTime()-t.getTime())}return this.status}explain(t,e){const n=this.lookup.transformInput(t),s={},i=this.lookup.outputLookup.dict[e];if(void 0===i)return{};for(let t=0;t<n.keys.length;t+=1){const e=n.keys[t];s[this.lookup.inputLookup.items[e]]=this.perceptrons[i].weights[e]}return{weights:s,bias:this.perceptrons[i].bias}}toJSON(){const t={},e=Object.keys(this.settings);for(let n=0;n<e.length;n+=1){const s=e[n];this.settings[s]!==i[s]&&(t[s]=this.settings[s])}if(!this.lookup)return{settings:t};const n=this.lookup.inputLookup.items,s=this.lookup.outputLookup.items,r=[];for(let t=0;t<this.perceptrons.length;t+=1){const e=this.perceptrons[t],n=[...e.weights,e.bias];r.push(n)}return{settings:t,features:n,intents:s,perceptrons:r}}fromJSON(t){if(this.settings=this.applySettings({...i,...t.settings}),t.features){this.lookup=new s(t.features,t.intents),this.initialize(t.features.length,t.intents);for(let e=0;e<this.perceptrons.length;e+=1){const n=this.perceptrons[e],s=t.perceptrons[e];n.bias=s[s.length-1];for(let e=0;e<t.features.length;e+=1)n.weights[e]=s[e]}}}}},2708:(t,e,n)=>{const{Clonable:s}=n(79);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="action-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.actions={},this.actionsMap={},this.applySettings(this,{pipelineFind:this.getPipeline(`${this.settings.tag}-find`)})}registerDefault(){}posAction(t,e,n){if(!this.actions[t])return-1;const s=this.actions[t];for(let t=0;t<s.length;t+=1)if(s[t].action===e&&JSON.stringify(s[t].parameters)===JSON.stringify(n))return t;return-1}findActions(t){return(this.actions[t]||[]).map((t=>({...t,fn:this.actionsMap[t.action]})))}async processActions(t,e){const n=this.findActions(t);e&&"object"==typeof e&&(e.actions=n.map((t=>({action:t.action,parameters:t.parameters}))));let s=e;for(const{fn:t,parameters:e}of n)if(t){const n=await t(s,...e||[]);n&&("object"==typeof s?"object"==typeof n?s=n:s.answer=n:s=n)}return s}addAction(t,e,n,s){-1===this.posAction(t,e,n)&&(this.actions[t]||(this.actions[t]=[]),this.actions[t].push({action:e,parameters:n}),s&&(this.actionsMap[e]=s))}removeAction(t,e,n){const s=this.posAction(t,e,n);s>-1&&this.actions[t].splice(s,1)}removeActions(t){delete this.actions[t]}registerActionInMap(t,e){this.actionsMap[t]=e}removeActionFromMap(t){delete this.actionsMap[t]}run(t,e){const n=t;return n.settings=n.settings||e||this.settings,this.processActions(t.intent,n)}toJSON(){const t={settings:{...this.settings},actions:this.actions};return delete t.settings.container,t}fromJSON(t){this.applySettings(this.settings,t.settings),this.actions=t.actions}}},2137:(t,e,n)=>{const s=n(525),i=n(2708);t.exports={NlgManager:s,ActionManager:i}},525:(t,e,n)=>{const{Clonable:s}=n(79);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="nlg-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.responses={},this.applySettings(this,{pipelineFind:this.getPipeline(`${this.settings.tag}-find`)})}registerDefault(){this.container.registerConfiguration("nlg-manager",{},!1)}findAllAnswers(t){const e=t;return this.responses[e.locale]?e.answers=this.responses[e.locale][e.intent]||[]:e.answers=[],e}filterAnswers(t){const e=t,{answers:n}=e;if(n&&n.length){const t=this.container.get("Evaluator");if(t){const s=e.context||{},i=[];for(let e=0;e<n.length;e+=1){const r=n[e];if(r.opts){const e="string"==typeof r.opts?r.opts:r.opts.condition;e?!0===t.evaluate(e,s)&&i.push(r):i.push(r)}else i.push(r)}e.answers=i}}return e}chooseRandom(t){const e=t,{answers:n}=e;return n&&n.length&&(e.answer=n[Math.floor(Math.random()*n.length)].answer),e}renderText(t,e){if(!t)return t;let n,s=t.answer||t;do{const t=/\((?:[^()]+)\|(?:[^()]+)\)/g.exec(s);if(t){for(let e=0;e<t.length;e+=1){const n=t[e],i=n.substring(1,n.length-1).split("|");s=s.replace(n,i[Math.floor(Math.random()*i.length)])}n=!0}else n=!1}while(n);t.answer?t.answer=s:t=s;const i=this.container.get("Template");return i&&e?i.compile(t,e):t}renderRandom(t){const e=t,{answers:n,context:s}=e;for(let t=0;t<n.length;t+=1)n[t]=this.renderText(n[t],s);return e}indexOfAnswer(t,e,n,s){if(!this.responses[t])return-1;if(!this.responses[t][e])return-1;const i=this.responses[t][e];for(let t=0;t<i.length;t+=1){const e=i[t];if(e.answer===n&&JSON.stringify(e.opts)===JSON.stringify(s))return t}return-1}add(t,e,n,s){const i=this.indexOfAnswer(t,e,n,s);if(-1!==i)return this.responses[t][e][i];this.responses[t]||(this.responses[t]={}),this.responses[t][e]||(this.responses[t][e]=[]);const r={answer:n,opts:s};return this.responses[t][e].push(r),r}remove(t,e,n,s){const i=this.indexOfAnswer(t,e,n,s);-1!==i&&this.responses[t][e].splice(i,1)}defaultPipelineFind(t){let e=this.findAllAnswers(t);return e=this.filterAnswers(e),e=this.renderRandom(e),e=this.chooseRandom(e),e}find(t,e,n,s){const i={locale:t,intent:e,context:n,settings:s||this.settings};return this.pipelineFind?this.runPipeline(i,this.pipelineFind):this.defaultPipelineFind(i)}run(t,e){return this.find(t.locale,t.intent,t.context,e)}toJSON(){const t={settings:{...this.settings},responses:this.responses};return delete t.settings.container,t}fromJSON(t){this.applySettings(this.settings,t.settings),this.responses=t.responses}}},9924:(t,e,n)=>{const{Clonable:s}=n(79);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="context-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.contextDictionary={},this.defaultData={}}registerDefault(){this.container.registerConfiguration("context-manager",{tableName:"context"})}async getInputContextId(t){let e;return this.onGetInputContextId&&(e=await this.onGetInputContextId(t)),!e&&t&&t.activity&&(t.activity.address&&t.activity.address.conversation?e=t.activity.address.conversation.id:t.activity.conversation&&(e=t.activity.conversation.id)),e}async getContext(t){const e=await this.getInputContextId(t);let n;if(e){if(this.settings.tableName){const t=this.container?this.container.get("database"):void 0;t&&(n=await t.findOne(this.settings.tableName,{conversationId:e})||{conversationId:e})}n||(n=this.contextDictionary[e]||{conversationId:e})}else n={};return n._data=this.defaultData,n}async setContext(t,e){const n=this.container.get("logger"),s=await this.getInputContextId(t);if(s){if(!e.id){const n=await this.getContext(t);n&&(e.id=n.id)}const i=Object.keys(e),r={conversationId:s};for(let t=0;t<i.length;t+=1){const n=i[t];n.startsWith("_")||(r[n]=e[n])}if(this.settings.tableName){const t=this.container?this.container.get("database"):void 0;t?await t.save(this.settings.tableName,r):this.contextDictionary[s]=r}else this.contextDictionary[s]=r;this.onCtxUpdate&&(n.debug("emmitting event onCtxUpdate..."),await this.onCtxUpdate(r))}}async resetConversations(){for(const t of Object.keys(this.contextDictionary))await this.resetConversation(t)}async resetConversation(t){this.container.get("logger").debug(`resetting context in conversation: ${t}`);const e=this.contextDictionary[t];Object.keys(e).forEach((t=>{delete e[t]})),this.contextDictionary[t].dialogStack=[],this.contextDictionary[t].variableName=void 0}}},6548:(t,e,n)=>{const s=n(1141),i=n(9924);t.exports={Nlp:s,ContextManager:i}},1141:(t,e,n)=>{const{Clonable:s,containerBootstrap:i}=n(79),{NluManager:r,NluNeural:o}=n(6607),{Ner:a,ExtractorEnum:c,ExtractorRegex:u,ExtractorTrim:l,ExtractorBuiltin:h}=n(3229),{ActionManager:g,NlgManager:p}=n(2137),{SentimentAnalyzer:f}=n(6465),{SlotManager:d}=n(213),m=n(9924);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e||i()},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="nlp"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.nluManager=this.container.get("nlu-manager",this.settings.nlu),this.ner=this.container.get("ner",this.settings.ner),this.nlgManager=this.container.get("nlg-manager",this.settings.nlg),this.actionManager=this.container.get("action-manager",this.settings.action),this.sentiment=this.container.get("sentiment-analyzer",this.settings.sentiment),this.slotManager=this.container.get("SlotManager",this.settings.slot),this.contextManager=this.container.get("context-manager",this.settings.context),this.forceNER=this.settings.forceNER,void 0===this.forceNER&&(this.forceNER=!1),this.initialize()}registerDefault(){this.container.registerConfiguration("nlp",{threshold:.5,autoLoad:!0,autoSave:!0,modelFileName:"model.nlp",executeActionsBeforeAnswers:!1},!1),this.use(r),this.use(a),this.use(c),this.use(u),this.use(l),this.use(h),this.use(p),this.use(g),this.use(o),this.use(f),this.use(m),this.container.register("SlotManager",d,!1)}initialize(){if(this.settings.nlu){const t=Object.keys(this.settings.nlu);for(let e=0;e<t.length;e+=1){const n=t[e],s=Object.keys(this.settings.nlu[n]);for(let t=0;t<s.length;t+=1){const e=s[t],i=this.settings.nlu[n][e],{className:r}=i;delete i.className,this.useNlu(r,n,e,i)}}}this.settings.languages&&this.addLanguage(this.settings.languages),this.settings.locales&&this.addLanguage(this.settings.locales),void 0===this.settings.calculateSentiment&&(this.settings.calculateSentiment=!0),void 0===this.settings.executeActionsBeforeAnswers&&(this.settings.executeActionsBeforeAnswers=!1)}async start(){this.settings.corpora&&await this.addCorpora(this.settings.corpora)}async loadOrTrain(){let t=!1;this.settings.autoLoad&&(t=await this.load(this.settings.modelFileName)),t||await this.train()}useNlu(t,e,n,s){if(e||(e="??"),Array.isArray(e))for(let i=0;i<e.length;i+=1)this.useNlu(t,e[i],n,s);else{const i="string"==typeof t?t:this.container.use(t);let r=this.container.getConfiguration(`domain-manager-${e}`);r||(r={},this.container.registerConfiguration(`domain-manager-${e}`,r)),r.nluByDomain||(r.nluByDomain={});const o=n&&"*"!==n?n:"default";r.nluByDomain[o]||(r.nluByDomain[o]={}),r.nluByDomain[o].className=i,r.nluByDomain[o].settings=s}}guessLanguage(t){return this.nluManager.guessLanguage(t)}addLanguage(t){return this.nluManager.addLanguage(t)}removeLanguage(t){return this.nluManager.removeLanguage(t)}addAdditionalEnumEntityUtterances(){this.settings.languages&&this.settings.languages.forEach((t=>{const e={};this.ner.getRules(t).forEach((t=>{if("enum"===t.type){const n=this.ner.nameToEntity(t.name);e[n]=e[n]||[],t.rules.forEach((t=>{e[n]=e[n].concat(t.texts)}))}}));const n=this.nluManager.consolidateManager(t);n.getSentences().forEach((s=>{const i=this.ner.getEntitiesFromUtterance(t,s.utterance).map((t=>this.ner.nameToEntity(t)));this.replaceEnumEntitiesInSentence(n,t,s.domain,s.utterance,s.intent,i,e)}))}))}replaceEnumEntitiesInSentence(t,e,n,s,i,r,o){if(!r.length)return this.nluManager.guesser.addExtraSentence(e,s),void t.add(n,s,i);const a=r[0];o[a]&&o[a].length?o[a].forEach((c=>{const u=s.replace(a,c);this.replaceEnumEntitiesInSentence(t,e,n,u,i,r.slice(1),o)})):this.replaceEnumEntitiesInSentence(t,e,n,s,i,r.slice(1),o)}addDocument(t,e,n){const s=this.ner.getEntitiesFromUtterance(e);return this.slotManager.addBatch(n,s),this.nluManager.add(t,e,n)}removeDocument(t,e,n){return this.nluManager.remove(t,e,n)}getRulesByName(t,e){return this.ner.getRulesByName(t,e)}addNerRule(t,e,n,s){return this.ner.addRule(t,e,n,s)}removeNerRule(t,e,n){return this.ner.removeRule(t,e,n)}addNerRuleOptionTexts(t,e,n,s){return this.ner.addRuleOptionTexts(t,e,n,s)}removeNerRuleOptionTexts(t,e,n,s){return this.ner.removeRuleOptionTexts(t,e,n,s)}addNerRegexRule(t,e,n){return this.ner.addRegexRule(t,e,n)}addNerBetweenCondition(t,e,n,s,i){return this.ner.addBetweenCondition(t,e,n,s,i)}addNerBetweenLastCondition(t,e,n,s,i){return this.ner.addBetweenLastCondition(t,e,n,s,i)}addNerPositionCondition(t,e,n,s,i){return this.ner.addPositionCondition(t,e,n,s,i)}addNerAfterCondition(t,e,n,s){return this.ner.addAfterCondition(t,e,n,s)}addNerAfterFirstCondition(t,e,n,s){return this.ner.addAfterFirstCondition(t,e,n,s)}addNerAfterLastCondition(t,e,n,s){return this.ner.addAfterLastCondition(t,e,n,s)}addNerBeforeCondition(t,e,n,s){return this.ner.addBeforeCondition(t,e,n,s)}addNerBeforeFirstCondition(t,e,n,s){return this.ner.addBeforeFirstCondition(t,e,n,s)}addNerBeforeLastCondition(t,e,n,s){return this.ner.addBeforeLastCondition(t,e,n,s)}assignDomain(t,e,n){return this.nluManager.assignDomain(t,e,n)}getIntentDomain(t,e){return this.nluManager.getIntentDomain(t,e)}getDomains(){return this.nluManager.getDomains()}addAction(t,e,n,s){return this.actionManager.addAction(t,e,n,s)}registerActionFunction(t,e){return this.actionManager.registerActionInMap(t,e)}getActions(t){return this.actionManager.findActions(t)}removeAction(t,e,n){return this.actionManager.removeAction(t,e,n)}removeActions(t){return this.actionManager.removeActions(t)}removeActionFunction(t){return this.actionManager.removeActionFromMap(t)}addAnswer(t,e,n,s){return this.nlgManager.add(t,e,n,s)}removeAnswer(t,e,n,s){return this.nlgManager.remove(t,e,n,s)}findAllAnswers(t,e){return this.nlgManager.findAllAnswers({locale:t,intent:e}).answers}async addCorpora(t){if(t)if(Array.isArray(t))for(let e=0;e<t.length;e+=1)await this.addCorpus(t[e]);else await this.addCorpus(t)}async addImported(t){let e;if(t.content)e=t.content;else{if(!t.filename)throw new Error("Corpus information without content or file name");{const n=this.container.get("fs");if(e=await n.readFile(t.filename),!e)throw new Error(`Corpus not found "${t.filename}"`)}}let n=this.container.get(t.importer);if(n||(n=this.container.get(`${t.importer}-importer`)),!n)throw new Error(`Corpus importer not found: ${t.importer}`);const s=n.transform(e,t);for(let t=0;t<s.length;t+=1)this.addCorpus(s[t])}addEntities(t,e){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const i=n[s];let r=t[i];"string"==typeof r&&(r={regex:[r]});let o=r.locale;if(o||(o=e||"en"),"string"==typeof o&&(o=o.slice(0,2)),r.options){const t=Object.keys(r.options);for(let e=0;e<t.length;e+=1)this.addNerRuleOptionTexts(o,i,t[e],r.options[t[e]])}if(r.regex)if(Array.isArray(r.regex))for(let t=0;t<r.regex.length;t+=1)this.addNerRegexRule(o,i,r.regex[t]);else"string"==typeof r.regex&&r.regex.trim()&&this.addNerRegexRule(o,i,r.regex);if(r.trim)for(let t=0;t<r.trim.length;t+=1)switch(r.trim[t].position){case"after":case"afterLast":case"afterFirst":case"before":case"beforeFirst":case"beforeLast":this.addNerPositionCondition(o,i,r.trim[t].position,r.trim[t].words,r.trim[t].opts);break;case"between":this.addNerBetweenCondition(o,i,r.trim[t].leftWords,r.trim[t].rightWords,r.trim[t].opts);break;case"betweenLast":this.addNerBetweenLastCondition(o,i,r.trim[t].leftWords,r.trim[t].rightWords,r.trim[t].opts)}}}addData(t,e,n){for(let s=0;s<t.length;s+=1){const i=t[s],{intent:r,utterances:o,answers:a,slotFilling:c,actions:u}=i;for(let t=0;t<o.length;t+=1)n&&this.assignDomain(e,r,n.name),this.addDocument(e,o[t],r);if(a)for(let t=0;t<a.length;t+=1){const n=a[t];"string"==typeof n?this.addAnswer(e,r,n):this.addAnswer(e,r,n.answer,n.opts)}if(c){const t=Object.keys(c);for(let n=0;n<t.length;n+=1){const s=c[t[n]];let i;const o={};"string"==typeof s?(o[e]=s,i=!0):(o[e]=s.question,i=s.mandatory||!1),this.slotManager.updateSlot(r,t[n],i,o)}}u&&u.forEach((t=>{if(t)if("object"==typeof t){if(!t.name)return;this.addAction(r,t.name,t.parameters||[])}else this.addAction(r,t,[])}))}}async addCorpus(t){if(t.importer)await this.addImported(t);else{let e=t;const n=this.container.get("fs");if("string"==typeof t){const s=await n.readFile(t);if(!s)throw new Error(`Corpus not found "${t}"`);e="string"==typeof s?JSON.parse(s):s}if(e.contextData){let{contextData:t}=e;"string"==typeof e.contextData&&(t=JSON.parse(await n.readFile(e.contextData)));const s=this.container.get("context-manager"),i=Object.keys(t);for(let e=0;e<i.length;e+=1)s.defaultData[i[e]]=t[i[e]]}if(e.domains){e.entities&&this.addEntities(e.entities);for(let t=0;t<e.domains.length;t+=1){const n=e.domains[t],{data:s,entities:i}=n,r=n.locale.slice(0,2);this.addLanguage(r),i&&this.addEntities(i,r),this.addData(s,r,n)}}else{const t=e.locale.slice(0,2);this.addLanguage(t);const{data:n,entities:s}=e;s&&this.addEntities(s,t),this.addData(n,t)}}}getSentiment(t,e){return"object"==typeof t?this.sentiment.process(t):(e||(e=t,t=this.guessLanguage(e)),this.sentiment.process({utterance:e,locale:t}))}describeLanguage(t,e){this.nluManager.describeLanguage(t,e)}async train(){this.nluManager.addLanguage(this.settings.languages);const t=await this.nluManager.train();return this.settings.autoSave&&await this.save(this.settings.modelFileName,!0),t}async classify(t,e,n){return this.nluManager.process(t,e,n||this.settings.nlu)}async extractEntities(t,e,n,s){return"object"==typeof t?this.ner.process(t):(e||(e=t,t=void 0),t||(t=this.guessLanguage(e)),await this.ner.process({locale:t,utterance:e,context:n,settings:this.applySettings(s,this.settings.ner)}))}organizeEntities(t){const e={};for(let n=0;n<t.length;n+=1){const s=t[n];e[s.entity]||(e[s.entity]=[]),e[s.entity].push(s)}const n=[];return Object.keys(e).forEach((t=>{const s=e[t];if(1===s.length)n.push(s[0]);else{for(let e=0;e<s.length;e+=1)s[e].alias=`${t}_${e}`;n.push({entity:t,isList:!0,items:s})}})),n}structureEntities(t){const e=this.organizeEntities(t.entities);t.context.entities||(t.context.entities={});for(let n=0;n<e.length;n+=1){const s=e[n];if(t.context.entities[s.entity]=s,s.alias&&(t.context[s.alias]=s.sourceText),s.isList)for(let e=0;e<s.items.length;e+=1)t.context[s.items[e].alias]=s.items[e].sourceText;else t.context[`${s.entity}_0`]=s.sourceText;t.context[s.entity]=s.isList?s.items[0].sourceText:s.sourceText}return t}async process(t,e,n,s){let i,r=n;"object"==typeof t&&("object"==typeof e&&e.value?(t=void 0,e=e.value):i=t),i?(t=i.locale,e=i.utterance||i.message||i.text):(e||(e=t,t=void 0),t||(t=this.guessLanguage(e)),i={locale:t,utterance:e,settings:s},s&&(s.activity&&!i.activity&&(i.activity=s.activity),s.conversationId&&!i.activity&&(i.activity={conversation:{id:s.conversationId}}))),r||(r=await this.contextManager.getContext(i)),r.channel=i.channel,r.app=i.app,r.from=i.from||null;const o={locale:t,utterance:e,context:r,settings:this.applySettings(s,this.settings.nlu)},a=o.settings&&"forceNER"in o.settings?o.settings.forceNER:this.forceNER;let c=await this.nluManager.process(o);if(a||!this.slotManager.isEmpty){const n=await this.ner.generateEntityUtterance(c.locale||t,e);if(n&&n!==e){const i={locale:c.locale||t,utterance:n,context:r,settings:this.applySettings(s,this.settings.nlu)},o=await this.nluManager.process(i);o&&(o.score>c.score||"None"===c.intent)&&(c=o,c.utterance=e,c.optionalUtterance=n)}}if(c.score<this.settings.threshold&&(c.score=1,c.intent="None"),c.context=r,a||!this.slotManager.isEmpty){const t=this.slotManager.getIntentEntityNames(c.intent);c=await this.ner.process({...c},t)}else c.entities=[],c.sourceEntities=[];const u=this.container.get(`stemmer-${c.locale}`);if(u&&u.lastFill&&u.lastFill(c),c=this.structureEntities(c),!a&&this.slotManager.isEmpty||(this.slotManager.process(c,r)&&(c=this.structureEntities(c)),r.slotFill=c.slotFill),this.settings.executeActionsBeforeAnswers&&(c=await this.actionManager.run({...c})),this.settings.executeActionsBeforeAnswers&&c.answer)c.answer=this.nlgManager.renderText(c.answer,r);else{const t=await this.nlgManager.run({...c});c.answers=t.answers,c.answer=t.answer}if(c.srcAnswer&&(c.answer=this.nlgManager.renderText(c.srcAnswer,r)),this.settings.executeActionsBeforeAnswers||(c=await this.actionManager.run({...c})),this.settings.calculateSentiment){const n=await this.getSentiment(t,e);c.sentiment=n?n.sentiment:void 0}await this.contextManager.setContext(i,r),delete c.context,delete c.settings;const l=i?this.applySettings(i,c):c;if("None"===l.intent&&!l.answer){const t=this.container.get("open-question");if(t){const e=await t.getAnswer(l.locale,l.utterance);e&&e.answer&&e.answer.length>0&&(l.answer=e.answer,l.isOpenQuestionAnswer=!0,l.openQuestionFirstCharacter=e.position,l.openQuestionScore=e.score)}}if(this.onIntent)await this.onIntent(this,l);else{const t=`onIntent(${l.intent})`,e=this.container.getPipeline(t);e&&await this.container.runPipeline(e,l,this)}return l}toJSON(){const t={settings:{...this.settings},nluManager:this.nluManager.toJSON(),ner:this.ner.toJSON(),nlgManager:this.nlgManager.toJSON(),actionManager:this.actionManager.toJSON(),slotManager:this.slotManager.save()};return delete t.settings.container,t}fromJSON(t){this.applySettings(this.settings,t.settings),this.nluManager.fromJSON(t.nluManager),this.ner.fromJSON(t.ner),this.nlgManager.fromJSON(t.nlgManager),this.actionManager.fromJSON(t.actionManager),this.slotManager.load(t.slotManager)}export(t=!1){const e=this.toJSON();return t?JSON.stringify(e):JSON.stringify(e,null,2)}import(t){const e="string"==typeof t?JSON.parse(t):t;this.fromJSON(e)}async save(t,e=!1){const n=this.container.get("fs"),s=t||"model.nlp";await n.writeFile(s,this.export(e))}async load(t){const e=this.container.get("fs"),n=t||"model.nlp",s=await e.readFile(n);return!!s&&(this.import(s),!0)}}},2507:(t,e,n)=>{const{Clonable:s,compareWildcars:i}=n(79),r="master_domain";t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.applySettings(this.settings,{locale:"en"}),this.settings.tag||(this.settings.tag=`domain-manager-${this.settings.locale}`),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.domains={},this.addDomain(r),this.stemDict={},this.intentDict={},this.sentences=[],this.applySettings(this,{pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("domain-manager-??",{nluByDomain:{default:{className:"NeuralNlu",settings:{}}},trainByDomain:!1,useStemDict:!0},!1),this.container.registerPipeline("domain-manager-??-train",[".trainStemmer",".generateCorpus",".fillStemDict",".innerTrain","output.status"],!1)}getDomainInstance(t){this.settings.nluByDomain||(this.settings.nluByDomain={});const e=this.settings.nluByDomain[t]||this.settings.nluByDomain.default||{className:"NeuralNlu",settings:{}};return this.container.get(e.className||"NeuralNlu",this.applySettings({locale:this.settings.locale},e.settings||{}))}addDomain(t){return this.domains[t]||(this.domains[t]=this.getDomainInstance(t)),this.domains[t]}removeDomain(t){delete this.domains[t]}async generateStemKey(t){let e;if("string"!=typeof t)e=t;else{const n=await this.prepare({utterance:t});e=await n.stems}return Array.isArray(e)||(e=Object.keys(e)),e.slice().sort().join()}add(t,e,n){n?this.sentences.push({domain:t,utterance:e,intent:n}):this.sentences.push({domain:r,utterance:t,intent:e})}getSentences(){return this.sentences}remove(t,e,n){const s=n?t:r,i=n?e:t,o=n||e;for(let t=0;t<this.sentences.length;t+=1){const e=this.sentences[t];if(e.domain===s&&e.utterance===i&&e.intent===o)return this.sentences.splice(t,1),!0}return!1}async trainStemmer(t){const e=t;this.cache||(this.cache={stem:this.container.get("stem")});for(let t=0;t<this.sentences.length;t+=1){const n={...this.sentences[t],...e};await this.cache.stem.addForTraining(n)}return await this.cache.stem.train(e),e}innerGenerateCorpus(t){this.intentDict={};const e={};e[r]=[];for(let n=0;n<this.sentences.length;n+=1){const s=this.sentences[n];this.intentDict[s.intent]=s.domain;const i=t||s.domain;e[i]||(e[i]=[]),e[i].push({utterance:s.utterance,intent:s.intent}),t||e[r].push({utterance:s.utterance,intent:s.domain})}return e}async generateCorpus(t){const e=t;return e.corpus=this.innerGenerateCorpus(this.settings.trainByDomain?void 0:r),e}async prepare(t){const e=t,n="string"==typeof e,s=n?e:e.utterance,i=this.addDomain(r).prepare(s);return n?i:(e.stems=i,e)}async fillStemDict(t){this.stemDict={};for(let t=0;t<this.sentences.length;t+=1){const{utterance:e,intent:n,domain:s}=this.sentences[t],i=await this.generateStemKey(e);i&&""!==i||this.container.get("logger").warn(`This utterance: "${e}" contains only stop words`),this.stemDict[i]={intent:n,domain:s}}return t}async innerTrain(t){const e=t,{corpus:n}=e,s=Object.keys(n),i={};for(let e=0;e<s.length;e+=1){const r=this.addDomain(s[e]),o={useNoneFeature:this.settings.useNoneFeature};t.settings&&void 0!==t.settings.log&&(o.log=t.settings.log);const a=await r.train(n[s[e]],o);i[s[e]]=a.status}return e.status=i,e}async train(t){const e={domainManager:this,settings:t||this.settings};return this.runPipeline(e,this.pipelineTrain)}matchAllowList(t,e){for(let n=0;n<e.length;n+=1)if(i(t,e[n]))return!0;return!1}async classifyByStemDict(t,e,n){const s=await this.generateStemKey(t),i=this.stemDict[s];if(i&&(!e||i.domain===e)){if(n&&!this.matchAllowList(i.intent,n))return;const t=[];t.push({intent:i.intent,score:1});const e=Object.keys(this.intentDict);for(let n=0;n<e.length;n+=1)e[n]!==i.intent&&t.push({intent:e[n],score:0});return{domain:i.domain,classifications:t}}}async innerClassify(t,e){const n=t;if(this.applySettings({...n.settings},this.settings).useStemDict){const s=await this.classifyByStemDict(n.utterance,e,t.settings?t.settings.allowList:void 0);if(s)return n.classification=s,n.explanation=[{token:"",stem:"##exact",weight:1}],n}if(e){const t=this.domains[e];if(!t)return n.classification={domain:"default",classifications:[{intent:"None",score:1}]},n;const s=await t.process(n.utterance,n.settings||this.settings);let i,o;return Array.isArray(s)?i=s:(i=s.classifications,n.nluAnswer=s),o=e===r?i&&i.length?this.intentDict[i[0].intent]:r:e,n.classification={domain:o,classifications:i},n}let s=r;if(void 0===n.settings.trainByDomain&&this.settings.trainByDomain||n.settings.trainByDomain){const t=this.domains[r];let e=await t.process(n.utterance);if(e.classifications&&(e=e.classifications),1===Object.keys(this.domains).length)return n.classification={domain:"default",classifications:e},n;if(s=e[0].intent,"None"===s)return n.classification={domain:"default",classifications:[{intent:"None",score:1}]},n}return this.innerClassify(n,s)}async defaultPipelineProcess(t){return(await this.innerClassify(t)).classification}async process(t,e){const n="string"==typeof t?{utterance:t,settings:e||this.settings}:t;return this.pipelineProcess?this.runPipeline(n,this.pipelineProcess):this.defaultPipelineProcess(n)}toJSON(){const t={settings:this.settings,stemDict:this.stemDict,intentDict:this.intentDict,sentences:this.sentences,domains:{}};delete t.settings.container;const e=Object.keys(this.domains);for(let n=0;n<e.length;n+=1)t.domains[e[n]]=this.domains[e[n]].toJSON();return t}fromJSON(t){this.applySettings(this.settings,t.settings),this.stemDict=t.stemDict,this.intentDict=t.intentDict,this.sentences=t.sentences;const e=Object.keys(t.domains);for(let n=0;n<e.length;n+=1)this.addDomain(e[n]).fromJSON(t.domains[e[n]])}}},6607:(t,e,n)=>{const s=n(9255),i=n(263),r=n(2507),o=n(3063);t.exports={Nlu:s,NluNeural:i,DomainManager:r,NluManager:o}},3063:(t,e,n)=>{const{Clonable:s}=n(79),{Language:i}=n(1994),r=n(2507);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="nlu-manager"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.container.get("Language")||this.container.register("Language",i,!1),this.guesser=this.container.get("Language"),this.locales=[],this.languageNames={},this.domainManagers={},this.intentDomains={},this.settings.locales&&this.addLanguage(this.settings.locales),this.applySettings(this,{pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("nlu-manager",{},!1),this.container.registerPipeline("nlu-manager-train",[".innerTrain"],!1)}describeLanguage(t,e){this.languageNames[t]={locale:t,name:e}}addLanguage(t){if(t){const e=Array.isArray(t)?t:[t];for(let t=0;t<e.length;t+=1){const n=e[t].substr(0,2).toLowerCase();this.locales.includes(n)||this.locales.push(n),this.domainManagers[n]||(this.domainManagers[n]=new r({locale:n,...this.settings.domain,useNoneFeature:this.settings.useNoneFeature,trainByDomain:this.settings.trainByDomain},this.container))}}}removeLanguage(t){if(Array.isArray(t))t.forEach((t=>this.removeLanguage(t)));else{delete this.domainManagers[t];const e=this.locales.indexOf(t);-1!==e&&this.locales.splice(e,1)}}guessLanguage(t){const e=t,n="string"==typeof e;if(1===this.locales.length)return n?this.locales[0]:([e.locale]=this.locales,e);if(!e)return n?void 0:e;if(!n&&e.locale)return e;const s=n?e:e.utterance;if(1===this.locales.length){if(n)return this.locales[0];[e.locale]=this.locales}const i=this.guesser.guess(s,this.locales,1),r=i&&i.length>0?i[0].alpha2:void 0;return n?r:(e.locale=r,e)}assignDomain(t,e,n){const s=n?t.substr(0,2).toLowerCase():void 0,i=n?e:t,r=n||e;if(s)this.intentDomains[s]||(this.intentDomains[s]={}),this.intentDomains[s][i]=r;else for(let t=0;t<this.locales.length;t+=1)this.assignDomain(this.locales[t],i,r)}getIntentDomain(t,e){const n=t.substr(0,2).toLowerCase();return this.intentDomains[n]&&this.intentDomains[n][e]||"default"}getDomains(){const t={},e=Object.keys(this.intentDomains);for(let n=0;n<e.length;n+=1){const s=e[n];t[s]={};const i=Object.keys(this.intentDomains[s]);for(let e=0;e<i.length;e+=1){const n=i[e],r=this.intentDomains[s][n];t[s][r]||(t[s][r]=[]),t[s][r].push(n)}}return t}consolidateLocale(t,e){const n=t?t.substr(0,2).toLowerCase():this.guessLanguage(e);if(!n)throw new Error("Locale must be defined");return n}consolidateManager(t){const e=this.domainManagers[t];if(!e)throw new Error(`Domain Manager not found for locale ${t}`);return e}add(t,e,n){const s=this.consolidateLocale(t,e),i=this.consolidateManager(s),r=this.getIntentDomain(s,n);this.guesser.addExtraSentence(s,e),i.add(r,e,n)}remove(t,e,n){const s=this.consolidateLocale(t,e),i=this.consolidateManager(s),r=this.getIntentDomain(s,n);i.remove(r,e,n)}async innerTrain(t){let e=t.locales||this.locales;Array.isArray(e)||(e=[e]);const n=e.filter((t=>this.domainManagers[t])).map((e=>this.domainManagers[e].train(t.settings)));return Promise.all(n)}async train(t){const e={nluManager:this,settings:this.applySettings(t,this.settings)};return delete e.settings.tag,this.runPipeline(e,this.pipelineTrain)}fillLanguage(t){const e=t;return e.languageGuessed=!1,e.locale||(e.locale=this.guessLanguage(e.utterance),e.languageGuessed=!0),e.locale&&(e.localeIso2=e.locale.substr(0,2).toLowerCase(),e.language=(this.languageNames[e.localeIso2]||this.guesser.languagesAlpha2[e.localeIso2]||{}).name),e}classificationsIsNone(t){return 1!==t.length&&(0===t.length||0===t[0].score||t[0].score===t[1].score)}checkIfIsNone(t){const e=t;return this.classificationsIsNone(e.classifications)&&(e.intent="None",e.score=1),e}async innerClassify(t){const e=t,n=this.domainManagers[e.localeIso2];if(!n)return e.classifications=[],e.domain=void 0,e.intent=void 0,e.score=void 0,e;const s=await n.process(t);return e.classifications=s.classifications.sort(((t,e)=>e.score-t.score)),0===e.classifications.length&&e.classifications.push({intent:"None",score:1}),e.intent=e.classifications[0].intent,e.score=e.classifications[0].score,"None"===e.intent?s.domain="default":"default"===s.domain?e.domain=this.getIntentDomain(e.locale,e.intent):e.domain=s.domain,e}async defaultPipelineProcess(t){let e=await this.fillLanguage(t);return e=await this.innerClassify(e),e=await this.checkIfIsNone(e),delete e.settings,delete e.classification,e}process(t,e,n,s){const i="object"==typeof t?t:{locale:void 0===e?void 0:t,utterance:void 0===e?t:e,domain:n,settings:s||this.settings};return this.pipelineProcess?this.runPipeline(i,this.pipelineProcess):this.defaultPipelineProcess(i)}toJSON(){const t={settings:this.settings,locales:this.locales,languageNames:this.languageNames,domainManagers:{},intentDomains:this.intentDomains,extraSentences:this.guesser.extraSentences.slice(0)};delete t.settings.container;const e=Object.keys(this.domainManagers);for(let n=0;n<e.length;n+=1){const s=e[n];t.domainManagers[s]=this.domainManagers[s].toJSON()}return t}fromJSON(t){this.applySettings(this.settings,t.settings);for(let e=0;e<t.locales.length;e+=1)this.addLanguage(t.locales[e]);this.languageNames=t.languageNames,this.intentDomains=t.intentDomains;const e=Object.keys(t.domainManagers);for(let n=0;n<e.length;n+=1){const s=e[n];this.domainManagers[s].fromJSON(t.domainManagers[s])}for(let e=0;e<t.extraSentences.length;e+=1){const n=t.extraSentences[e];this.guesser.addExtraSentence(n[0],n[1])}}}},263:(t,e,n)=>{const{NeuralNetwork:s}=n(165),i=n(9255);class r extends i{async innerTrain(t){const e=t;return this.neuralNetwork=new s(e.settings,this.container),e.status=await this.neuralNetwork.train(e.corpus),e}innerProcess(t){const e=t;e.classifications=this.neuralNetwork&&this.neuralNetwork.run(e.tokens)||{None:1},this.convertToArray(e);const{intent:n}=e.classifications[0];return e.settings&&e.settings.returnExplanation&&n&&this.neuralNetwork&&"None"!==n&&(e.explanation=this.neuralNetwork.explain(e.tokens,n)),e}registerDefault(){super.registerDefault(),this.container.register("NeuralNlu",r,!1)}toJSON(){const t=super.toJSON();return t.neuralNetwork=this.neuralNetwork?this.neuralNetwork.toJSON():void 0,t}fromJSON(t){super.fromJSON(t),t.neuralNetwork&&(this.neuralNetwork=new s,this.neuralNetwork.fromJSON(t.neuralNetwork))}}t.exports=r},9255:(t,e,n)=>{const{Clonable:s,compareWildcars:i}=n(79),{SpellCheck:r}=n(6964);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.applySettings(this.settings,{locale:"en"}),this.settings.tag||(this.settings.tag=`nlu-${this.settings.locale}`),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.applySettings(this,{pipelinePrepare:this.getPipeline(`${this.settings.tag}-prepare`),pipelineTrain:this.getPipeline(`${this.settings.tag}-train`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)}),this.spellCheck=new r(this.settings)}registerDefault(){this.container.registerConfiguration("nlu-??",{keepStopwords:!0,nonefeatureValue:1,nonedeltaMultiplier:1.2,spellCheck:!1,spellCheckDistance:1,filterZeros:!0,log:!0},!1),this.container.registerPipeline("nlu-??-train",[".prepareCorpus",".addNoneFeature",".innerTrain"],!1)}async defaultPipelinePrepare(t){let e;if(this.cache){const t=new Date;Math.abs(t.getTime()-this.cache.created)/36e5>1&&(this.cache.results={},this.cache.created=(new Date).getTime())}if(this.cache){if(this.cache.results[t.settings.locale]&&(e=this.cache.results[t.settings.locale][t.text||t.utterance],e))return e}else this.cache={created:(new Date).getTime(),results:{},normalize:this.container.get("normalize"),tokenize:this.container.get("tokenize"),removeStopwords:this.container.get("removeStopwords"),stem:this.container.get("stem"),arrToObj:this.container.get("arrToObj")};let n=t;return n=this.cache.normalize.run(n),n=await this.cache.tokenize.run(n),n=this.cache.removeStopwords.run(n),n=await this.cache.stem.run(n),n=this.cache.arrToObj.run(n),e=n.tokens,this.cache.results[t.settings.locale]||(this.cache.results[t.settings.locale]={}),this.cache.results[t.settings.locale][t.text||t.utterance]=e,e}async defaultPipelineProcess(t){let e=await this.prepare(t);return e=await this.doSpellCheck(e),e=await this.textToFeatures(e),e=await this.innerProcess(e),e=await this.filterNonActivated(e),e=await this.normalizeClassifications(e),e}async prepare(t,e){const n=e||this.settings;if("string"==typeof t){const e={locale:this.settings.locale,text:t,settings:n};return this.pipelinePrepare?this.runPipeline(e,this.pipelinePrepare):this.defaultPipelinePrepare(e)}if("object"==typeof t){if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s+=1)e.push(await this.prepare(t[s],n));return e}let e=n.fieldNameSrc?t[n.fieldNameSrc]:t.texts||t.utterances;if(e||"string"==typeof e||("string"==typeof t.text?e=t.text:"string"==typeof t.utterance&&(e=t.utterance)),e||"string"==typeof e){const s=await this.prepare(e,n);return{[n.fieldNameTgt||"tokens"]:s,...t}}}throw new Error(`Error at nlu.prepare: expected a text but received ${t}`)}async doSpellCheck(t,e){const n=this.applySettings(e||{},this.settings);let s=void 0===t.settings.spellCheck?void 0:t.settings.spellCheck,i=void 0===t.settings.spellCheckDistance?void 0:t.settings.spellCheckDistance;if(void 0===s&&(s=void 0===n.spellCheck?void 0:n.spellCheck),void 0===i&&(i=void 0===n.spellCheckDistance?1:n.spellCheckDistance),s){const e=this.spellCheck.check(t.tokens,i);t.tokens=e}return t}async prepareCorpus(t){this.features={},this.intents={},this.intentFeatures={};const e=t,{corpus:n}=e,s=[];for(let t=0;t<n.length;t+=1){const{intent:i}=n[t],r={input:await this.prepare(n[t].utterance,e.settings),output:{[i]:1}},o=Object.keys(r.input);Object.prototype.hasOwnProperty.call(this.intentFeatures,i)||(this.intentFeatures[i]={});for(let t=0;t<o.length;t+=1)this.features[o[t]]=1,this.intentFeatures[i][o[t]]=1;this.intents[i]=1,s.push(r)}const i=Object.keys(this.intentFeatures);this.featuresToIntent={};for(let t=0;t<i.length;t+=1){const e=i[t],n=Object.keys(this.intentFeatures[e]);for(let t=0;t<n.length;t+=1){const s=n[t];Object.prototype.hasOwnProperty.call(this.featuresToIntent,s)||(this.featuresToIntent[s]=[]),this.featuresToIntent[s].push(e)}}return this.spellCheck.setFeatures(this.features),this.numFeatures=Object.keys(this.features).length,this.numIntents=Object.keys(this.intents).length,e.corpus=s,e}addNoneFeature(t){const{corpus:e}=t;return t.settings&&t.settings.useNoneFeature&&e.push({input:{nonefeature:1},output:{None:1}}),t}convertToArray(t){const e=t,{classifications:n}=e;if(n){this.intentsArr||(this.intents?(this.intentsArr=Object.keys(this.intents),this.intents.None||this.intentsArr.push("None")):this.intentsArr=Object.keys(n));const t=this.intentsArr,s=[];for(let i=0;i<t.length;i+=1){const r=t[i],o=n[r];void 0!==o&&(o>0||!e.settings.filterZeros)&&s.push({intent:r,score:o})}s.length||s.push({intent:"None",score:1}),e.classifications=s.sort(((t,e)=>e.score-t.score))}return e}someSimilar(t,e){for(let n=0;n<e.length;n+=1)if(t[e[n]])return!0;return!1}matchAllowList(t,e){for(let n=0;n<e.length;n+=1)if(i(t,e[n]))return!0;return!1}intentIsActivated(t,e,n){if(n){if(Array.isArray(n))return this.matchAllowList(t,n);if(!n[t])return!1}const s=this.intentFeatures[t];if(!s)return!1;const i=Object.keys(e);for(let t=0;t<i.length;t+=1)if(s[i[t]])return!0;return!1}filterNonActivated(t){if(this.intentFeatures&&t.classifications){const e=t.classifications.map((t=>t.intent));let n=!1;for(let s=0;s<e.length;s+=1){const i=e[s];"None"!==i&&(this.intentIsActivated(i,t.tokens,t.settings.allowList)||(t.classifications[s].score=0,n=!0))}n&&t.classifications.sort(((t,e)=>e.score-t.score))}return t}normalizeClassifications(t){const e=t,{classifications:n}=e;if(n){let t=0;for(let e=0;e<n.length;e+=1)n[e].score**=2,t+=n[e].score;if(t>0)for(let e=0;e<n.length;e+=1)n[e].score/=t}else e.classifications=e.nluAnswer;return e}textToFeatures(t){const e=t,{tokens:n}=e,s=Object.keys(n);let i=0;const r={};for(let t=0;t<s.length;t+=1){const e=s[t];"nonefeature"===e?n[e]=this.nonefeatureValue:this.features&&this.features[e]?r[e]=n[e]:i+=1}let o=void 0===e.settings.nonedeltaValue?this.numIntents/this.numFeatures:this.settings.nonedeltaValue,a=0;for(let t=0;t<i;t+=1)a+=o,o*=this.settings.nonedeltaMultiplier;return e.settings&&e.settings.useNoneFeature&&a&&(r.nonefeature=a),e.tokens=r,e}async innerTrain(){throw new Error("This method should be implemented by child classes")}async train(t,e){const n={corpus:t,settings:this.applySettings(e,this.settings)};return this.runPipeline(n,this.pipelineTrain)}async getExplanation(t,e){if(!e)return;const n=await this.container.get("normalize").run(t),s=await this.container.get("tokenize").run(n),{tokens:i}=s,r=(await this.container.get("stem").run(s)).tokens,o=[];o.push({token:"",stem:"##bias",weight:e.bias});for(let t=0;t<i.length;t+=1){const n=r[t];o.push({token:i[t],stem:n,weight:e.weights[n]})}return o}async process(t,e){const n={text:t,settings:this.applySettings(e||{},this.settings)};let s;if(s=this.pipelineProcess?await this.runPipeline(n,this.pipelineProcess):await this.defaultPipelineProcess(n),Array.isArray(s.classifications)){const t=n.settings.returnExplanation?await this.getExplanation(n,s.explanation):void 0;return{classifications:s.classifications,entities:void 0,explanation:t}}return s.intents&&(s.classifications=s.intents,delete s.intents),s}toJSON(){const t={settings:{...this.settings},features:this.features,intents:this.intents,intentFeatures:this.intentFeatures,featuresToIntent:this.featuresToIntent};return delete t.settings.container,t}fromJSON(t){this.applySettings(this.settings,t.settings),this.features=t.features||{},this.intents=t.intents||{},this.intentsArr=Object.keys(t.intents),this.featuresToIntent=t.featuresToIntent||{},this.intentFeatures=t.intentFeatures||{},this.spellCheck.setFeatures(this.features),this.numFeatures=Object.keys(this.features).length,this.numIntents=Object.keys(this.intents).length}}},6465:(t,e,n)=>{const s=n(2824);t.exports={SentimentAnalyzer:s}},2824:(t,e,n)=>{const{Clonable:s}=n(79);t.exports=class extends s{constructor(t={},e){super({settings:{},container:t.container||e},e),this.applySettings(this.settings,t),this.settings.tag||(this.settings.tag="sentiment-analyzer"),this.registerDefault(),this.applySettings(this.settings,this.container.getConfiguration(this.settings.tag)),this.applySettings(this,{pipelinePrepare:this.getPipeline(`${this.settings.tag}-prepare`),pipelineProcess:this.getPipeline(`${this.settings.tag}-process`)})}registerDefault(){this.container.registerConfiguration("sentiment-analyzer",{},!1)}prepare(t,e,n,s){const i=this.getPipeline(`${this.settings.tag}-prepare`);if(i){const s={text:e,locale:t,settings:n||this.settings};return this.runPipeline(s,i)}if(s){const n=this.container.get(`stemmer-${t}`)||this.container.get("stemmer-en");if(n)return n.tokenizeAndStem(e)}const r=this.container.get(`tokenizer-${t}`)||this.container.get("tokenizer-en");return r?r.tokenize(e,!0):e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().split(/[\s,.!?;:([\]'")/]+/).filter((t=>t))}async getDictionary(t){const e=t,n=this.container.get(`sentiment-${e.locale}`);let s;return n&&(n.senticon?s="senticon":n.pattern?s="pattern":n.afinn&&(s="afinn")),s?(e.sentimentDictionary={type:s,dictionary:n[s],negations:n.negations.words,stemmed:void 0!==n.stemmed&&n.stemmed},e):(e.sentimentDictionary={type:s,dictionary:void 0,negations:[],stemmed:!1},e)}async getTokens(t){const e=t;return!e.tokens&&e.sentimentDictionary.type&&(e.tokens=await this.prepare(e.locale,e.utterance||e.text,e.settings,e.sentimentDictionary.stemmed)),e}calculate(t){const e=t;if(e.sentimentDictionary.type){const t=Array.isArray(e.tokens)?e.tokens:Object.keys(e.tokens);if(e.sentimentDictionary.dictionary){const{dictionary:n}=e.sentimentDictionary,{negations:s}=e.sentimentDictionary;let i=0,r=1,o=0;for(let e=0;e<t.length;e+=1){const a=t[e].toLowerCase();-1!==s.indexOf(a)?(r=-1,o+=1):void 0!==n[a]&&(i+=r*n[a],o+=1)}e.sentiment={score:i,numWords:t.length,numHits:o,average:i/t.length,type:e.sentimentDictionary.type,locale:e.locale}}else e.sentiment={score:0,numWords:t.length,numHits:0,average:0,type:e.sentimentDictionary.type,locale:e.locale}}else e.sentiment={score:0,numWords:0,numHits:0,average:0,type:e.sentimentDictionary.type,locale:e.locale};return e.sentiment.score>0?e.sentiment.vote="positive":e.sentiment.score<0?e.sentiment.vote="negative":e.sentiment.vote="neutral",e}async defaultPipelineProcess(t){let e=await this.getDictionary(t);return e=await this.getTokens(e),e=await this.calculate(e),delete e.sentimentDictionary,e}process(t,e){const n=t;return n.settings=n.settings||e||this.settings,this.pipelineProcess?this.runPipeline(n,this.pipelineProcess):this.defaultPipelineProcess(n)}}},9393:t=>{t.exports=class{constructor(t){this.container=t}getTokens(t,e="en"){if("string"==typeof t){const n=this.container&&this.container.get(`tokenizer-${e}`);return n?n.tokenize(t,!0):t.split(" ")}return t}termFreqMap(t,e){const n=this.getTokens(t,e),s={};return n.forEach((t=>{s[t]=(s[t]||0)+1})),s}addKeysToDict(t,e){Object.keys(t).forEach((t=>{e[t]=!0}))}termFreqMapToVector(t,e){const n=[];return Object.keys(e).forEach((e=>{n.push(t[e]||0)})),n}vecDotProduct(t,e){let n=0;for(let s=0;s<t.length;s+=1)n+=t[s]*e[s];return n}vecMagnitude(t){let e=0;for(let n=0;n<t.length;n+=1)e+=t[n]*t[n];return Math.sqrt(e)}cosineSimilarity(t,e){return this.vecDotProduct(t,e)/(this.vecMagnitude(t)*this.vecMagnitude(e))}getTermFreqVectors(t,e,n){const s=this.termFreqMap(t,n),i=this.termFreqMap(e,n);if(!Object.keys(s).length||!Object.keys(i).length)return 0;const r={};return this.addKeysToDict(s,r),this.addKeysToDict(i,r),[this.termFreqMapToVector(s,r),this.termFreqMapToVector(i,r)]}similarity(t,e,n){if(t===e)return 1;const[s,i]=this.getTermFreqVectors(t,e,n);return this.cosineSimilarity(s,i)}}},6964:(t,e,n)=>{const s=n(7401),i=n(3230),r=n(9393),o=n(9602);t.exports={leven:s,CosineSimilarity:r,similarity:i,SpellCheck:o}},7401:t=>{const e=[],n=[];t.exports=function(t,s){t.length>s.length&&([t,s]=[s,t]);let i=t.length-1,r=s.length-1;for(;i>0&&t.charCodeAt(i)===s.charCodeAt(r);)i-=1,r-=1;i+=1,r+=1;let o,a,c,u,l=0;for(;l<i&&t.charCodeAt(l)===s.charCodeAt(l);)l+=1;if(i-=l,r-=l,0===i)return r;for(let s=0;s<i;s+=1)n[s]=t.charCodeAt(l+s),e[s]=s+1;let h=0;for(;h<r;){o=s.charCodeAt(l+h),c=h,h+=1,a=h;for(let t=0;t<i;t+=1)u=c+(o!==n[t])|0,c=e[t],e[t]=c>a?u>a?a+1:u:u>c?c+1:u,a=e[t]}return a}},3230:(t,e,n)=>{const s=n(7401);t.exports=function(t,e,n=!1){return n&&(t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),t===e?0:s(t,e)}},9602:(t,e,n)=>{const s=n(3230);t.exports=class{constructor(t){this.settings=t||{},this.minLength=this.settings.minLength||4,this.settings.features?this.setFeatures(this.settings.features):(this.features={},this.featuresByLength={})}setFeatures(t){this.features=t,this.featuresByLength={},this.featuresList=Object.keys(this.features);for(let t=0;t<this.featuresList.length;t+=1){const e=this.featuresList[t],{length:n}=e;this.featuresByLength[n]||(this.featuresByLength[n]=[]),this.featuresByLength[n].push(e)}}checkToken(t,e){if(this.features[t])return t;if(t.length<this.minLength)return t;let n,i=1/0;for(let r=t.length-e-1;r<t.length+e;r+=1){const o=this.featuresByLength[r+1];if(o)for(let r=0;r<o.length;r+=1){const a=o[r],c=s(t,a);if(c<=e)if(c<i)n=a,i=c;else if(c===i&&n){const e=Math.abs(n.length-t.length),s=Math.abs(a.length-t.length);(e>s||e===s&&this.features[a]>this.features[n])&&(n=a,i=c)}}}return n||t}check(t,e=1){if(!Array.isArray(t)){const n=Object.keys(t),s=this.check(n,e),i={};for(let e=0;e<s.length;e+=1)i[s[e]]=t[n[e]];return i}const n=[];for(let s=0;s<t.length;s+=1)n.push(this.checkToken(t[s],e));return n}}},213:(t,e,n)=>{const s=n(4903);t.exports={SlotManager:s}},4903:t=>{t.exports=class{constructor(){this.intents={},this.isEmpty=!0}getSlot(t,e){if(this.intents[t])return this.intents[t][e]}existsSlot(t,e){return void 0!==this.getSlot(t,e)}addSlot(t,e,n=!1,s){return this.isEmpty=!1,this.intents[t]||(this.intents[t]={}),this.intents[t][e]={intent:t,entity:e,mandatory:n,locales:s||{}},this.intents[t][e]}updateSlot(t,e,n,s){if(!this.intents[t]||!this.intents[t][e])return this.addSlot(t,e,n,s);const i=this.intents[t][e];return void 0!==n&&(i.mandatory=n),i.locales=Object.assign(i.locales,s),this.intents[t][e]}removeSlot(t,e){this.intents[t]&&delete this.intents[t][e]}addBatch(t,e){const n=[];return e&&e.length>0&&e.forEach((e=>{let s=this.getSlot(t,e);s||(s=this.addSlot(t,e)),n.push(s)})),n}getIntentEntityNames(t){if(this.intents[t])return Object.keys(this.intents[t])}hasIntentEntities(t){return this.getIntentEntityNames(t).length>0}clear(){this.intents={}}load(t){this.intents=t||{},this.isEmpty=0===Object.keys(this.intents).length}save(){return this.intents}getMandatorySlots(t){const e={},n=this.intents[t];if(n){const t=Object.keys(n);for(let s=0,i=t.length;s<i;s+=1){const i=n[t[s]];i.mandatory&&(e[i.entity]=i)}}return e}cleanContextEntities(t,e){const n=e;if(n.slotFill)return;const s=this.getMandatorySlots(t),i=Object.keys(s);0!==i.length&&i.forEach((t=>{delete n[t]}))}generateEntityAliases(t){const e=[],n={};for(let s=0;s<t.length;s+=1){const i=t[s];n[i.entity]||(n[i.entity]=[]),e[s]=`${i.entity}_${n[i.entity].length}`,n[i.entity].push(!0)}return e}process(t,e){const n=t,s=e;if(this.cleanContextEntities(n.intent,s),s.slotFill&&(n.intent=s.slotFill.intent,n.answer=s.slotFill.answer,n.srcAnswer=s.slotFill.srcAnswer),!n.intent||"None"===n.intent)return!1;s.slotFill&&s.slotFill.intent===n.intent&&(n.entities=[...s.slotFill.entities,...n.entities]);const i=this.getMandatorySlots(n.intent);let r=Object.keys(i);if(0===r.length)return!1;const o=this.generateEntityAliases(n.entities);for(let t=0,e=n.entities.length;t<e;t+=1)delete i[n.entities[t].entity],delete i[o[t]];if(s.slotFill&&i[s.slotFill.currentSlot]&&(n.entities.push({entity:s.slotFill.currentSlot,utteranceText:n.utterance,sourceText:n.utterance,accuracy:.95,start:0,end:n.utterance.length-1,len:n.utterance.length,isSlotFillingFallback:!0}),delete i[s.slotFill.currentSlot]),r=Object.keys(i),s.slotFill&&s.slotFill.currentSlot&&(s.slotFill.latestSlot=s.slotFill.currentSlot),!r||0===r.length)return delete n.srcAnswer,!0;s.slotFill&&s.slotFill.intent===n.intent&&(n.localeIso2=s.slotFill.localeIso2),n.slotFill={localeIso2:n.localeIso2,intent:n.intent,entities:n.entities,answer:n.answer,srcAnswer:n.srcAnswer},s.slotFill&&s.slotFill.latestSlot&&(n.slotFill.latestSlot=s.slotFill.latestSlot);const a=i[r[0]];return n.slotFill.currentSlot=a.entity,n.srcAnswer=a.locales[n.localeIso2],s.slotFill=n.slotFill,!0}}},1250:t=>{"use strict";t.exports=JSON.parse('{"Latin":{"spa":"","eng":"","por":"","ind":"","fra":"","deu":"","ita":"","tur":"","nld":"","tgl":"","hun":"","ces":"","swe":"","fin":"","dan":"","cat":"","glg":"","slv":""},"Cyrillic":{"rus":"","ukr":""},"Arabic":{"arb":"","fas":""},"Devanagari":{"hin":""},"Ethiopic":{},"Hebrew":{}}')},6102:t=>{"use strict";t.exports=JSON.parse('[["ar","arb","Arabic"],["bn","ben","Bengali"],["ca","cat","Catalan"],["cs","ces","Czech"],["da","dan","Danish"],["de","deu","German"],["el","ell","Greek"],["en","eng","English"],["eu","eus","Basque"],["fa","fas","Persian"],["fi","fin","Finnish"],["fr","fra","French"],["ga","gle","Irish"],["gl","glg","Galician"],["hi","hin","Hindi"],["hu","hun","Hungarian"],["hy","hye","Armenian"],["id","ind","Indonesian"],["it","ita","Italian"],["ja","jpn","Japanese"],["ko","kor","Korean"],["lt","lit","Lithuanian"],["ne","nep","Nepali"],["nl","nld","Dutch"],["no","nor","Norwegian"],["pl","pol","Polish"],["pt","por","Portuguese"],["ro","ron","Romanian"],["ru","rus","Russian"],["sr","srp","Serbian"],["sl","slv","Slovenian"],["es","spa","Spanish"],["sv","swe","Swedish"],["ta","tam","Tamil"],["tl","tgl","Tagalog"],["th","tha","Thai"],["tr","tur","Turkish"],["uk","ukr","Ukrainian"],["zh","cmn","Chinese"]]')}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return s};var n,s={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(n){h=function(t,e,n){return t[e]=n}}function g(t,e,n,s){var i=e&&e.prototype instanceof b?e:b,r=Object.create(i.prototype),a=new O(s||[]);return o(r,"_invoke",{value:S(t,n,a)}),r}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}s.wrap=g;var f="suspendedStart",d="suspendedYield",m="executing",y="completed",w={};function b(){}function v(){}function x(){}var D={};h(D,c,(function(){return this}));var k=Object.getPrototypeOf,A=k&&k(k(T([])));A&&A!==i&&r.call(A,c)&&(D=A);var F=x.prototype=b.prototype=Object.create(D);function C(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function E(e,n){function s(i,o,a,c){var u=p(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==t(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){s("next",t,a,c)}),(function(t){s("throw",t,a,c)})):n.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return s("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,i){s(t,e,n,i)}))}return i=i?i.then(r,r):r()}})}function S(t,e,s){var i=f;return function(r,o){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===r)throw o;return{value:n,done:!0}}for(s.method=r,s.arg=o;;){var a=s.delegate;if(a){var c=_(a,s);if(c){if(c===w)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(i===f)throw i=y,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);i=m;var u=p(t,e,s);if("normal"===u.type){if(i=s.done?y:d,u.arg===w)continue;return{value:u.arg,done:s.done}}"throw"===u.type&&(i=y,s.method="throw",s.arg=u.arg)}}}function _(t,e){var s=e.method,i=t.iterator[s];if(i===n)return e.delegate=null,"throw"===s&&t.iterator.return&&(e.method="return",e.arg=n,_(t,e),"throw"===e.method)||"return"!==s&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+s+"' method")),w;var r=p(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,w;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,w):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function T(e){if(e||""===e){var s=e[c];if(s)return s.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return v.prototype=x,o(F,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:v,configurable:!0}),v.displayName=h(x,l,"GeneratorFunction"),s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,l,"GeneratorFunction")),t.prototype=Object.create(F),t},s.awrap=function(t){return{__await:t}},C(E.prototype),h(E.prototype,u,(function(){return this})),s.AsyncIterator=E,s.async=function(t,e,n,i,r){void 0===r&&(r=Promise);var o=new E(g(t,e,n,i),r);return s.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(F),h(F,l,"Generator"),h(F,c,(function(){return this})),h(F,"toString",(function(){return"[object Generator]"})),s.keys=function(t){var e=Object(t),n=[];for(var s in e)n.push(s);return n.reverse(),function t(){for(;n.length;){var s=n.pop();if(s in e)return t.value=s,t.done=!1,t}return t.done=!0,t}},s.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function s(s,i){return a.type="throw",a.arg=t,e.next=s,i&&(e.method="next",e.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var s=n.completion;if("throw"===s.type){var i=s.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,s){return this.delegate={iterator:T(t),resultName:e,nextLoc:s},"next"===this.method&&(this.arg=n),w}},s}function s(t,e,n,s,i,r,o){try{var a=t[r](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(s,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){s(o,i,r,a,c,"next",t)}function c(t){s(o,i,r,a,c,"throw",t)}a(void 0)}))}}var r=new(0,n(7758).FabilabNlp),o=["who are you?","what do you research?","where are you?","what do you teach?","how do I join?"],a=function(){var t=i(e().mark((function t(n){var s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chatbot.ask(n);case 2:return s=t.sent,t.abrupt("return",(void 0,i="research"!=(e=s.intent)?"/pages/"+e+".html":"/",void(window.location.href=i)));case 4:case"end":return t.stop()}var e,i}),t)})));return function(e){return t.apply(this,arguments)}}();i(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.initialise();case 2:window.chatbot=r,window.chatbot.askAndRedirect=a,window.onload=function(){var t,e,n=o[(t=0,e=o.length-1,t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)];document.getElementById("chatbotText").value=n,document.getElementById("chatbotForm").onsubmit=function(){var t=this.getElementsByTagName("input")[0].value;return window.chatbot.askAndRedirect(t),!1}};case 5:case"end":return t.stop()}}),t)})))()})()})();